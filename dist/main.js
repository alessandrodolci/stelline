!function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";function o(t,e,i,o){this.x=t,this.y=e,this.size=i,this.visible=o}i.r(e),i.d(e,"getNewStars",(function(){return v}));const n=document.getElementById("stars"),s=n.getContext("2d");function r(t,e){o.call(this,t,e,30,!0),this.shots=[]}function h(t,e,i,n){o.call(this,t,e,4,null),this.targetX=i,this.targetY=n,this.hit=!1}r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.setPosition=function(t,e){this.x=t,this.y=e},r.prototype.resetSize=function(){this.size=30},r.prototype.getNoseXCoordinate=function(){return this.x},r.prototype.getNoseYCoordinate=function(){return this.y-this.size/2},r.prototype.getLeftWingXCoordinate=function(){return this.x-this.size},r.prototype.getRightWingXCoordinate=function(){return this.x+this.size},r.prototype.getWingsYCoordinate=function(){return this.y+this.size/4},r.prototype.getTopXCoordinate=function(){return this.x},r.prototype.getTopYCoordinate=function(){return this.y-this.size/8},r.prototype.getRearXCoordinate=function(){return this.x},r.prototype.getRearYCoordinate=function(){return this.y+this.size/3},r.prototype.moveVertically=function(t){const e=n.width/2-this.x,i=n.height/2-this.y,o=Math.atan2(i,e);this.x-=t*Math.cos(o),this.y>n.height/2&&(this.y-=t*Math.sin(o),this.size+=t/20)},r.prototype.moveHorizontally=function(t){this.x+=t},r.prototype.draw=function(){const t=2*this.getTopXCoordinate()/n.width-1;s.setTransform(new DOMMatrix([1,0,t,1,0,0])),s.beginPath(),s.moveTo(this.getLeftWingXCoordinate(),this.getWingsYCoordinate()),s.lineTo(this.getNoseXCoordinate(),this.getNoseYCoordinate()),s.lineTo(this.getRightWingXCoordinate(),this.getWingsYCoordinate()),s.lineTo(this.getRearXCoordinate(),this.getRearYCoordinate()),s.lineTo(this.getLeftWingXCoordinate(),this.getWingsYCoordinate()),s.moveTo(this.getTopXCoordinate(),this.getTopYCoordinate()),s.lineTo(this.getLeftWingXCoordinate(),this.getWingsYCoordinate()),s.moveTo(this.getTopXCoordinate(),this.getTopYCoordinate()),s.lineTo(this.getRightWingXCoordinate(),this.getWingsYCoordinate()),s.moveTo(this.getTopXCoordinate(),this.getTopYCoordinate()),s.lineTo(this.getNoseXCoordinate(),this.getNoseYCoordinate()),s.closePath(),s.strokeStyle="white",s.lineWidth=1.5,s.stroke(),s.setTransform()},r.prototype.fireShot=function(t,e){this.shots.push(new h(this.getNoseXCoordinate(),this.getNoseYCoordinate(),t,e))},h.prototype=Object.create(o.prototype),h.prototype.constructor=h,h.prototype.draw=function(){s.beginPath(),s.ellipse(this.x,this.y,this.size/2,this.size/2,0,0,2*Math.PI),s.closePath(),s.fillStyle="grey",s.fill()};const a=document.getElementById("stars").getContext("2d");function l(t,e){const i=3.3*Math.random()+.2;o.call(this,t,e,i,!1),this.initialX=t,this.initialY=e,this.vx=Math.min(1,this.size/2)*(Math.random()-.5),this.vy=Math.min(1,this.size/2)*(Math.random()-.5)}l.prototype=Object.create(o.prototype),l.prototype.constructor=l,l.prototype.move=function(t=1){this.x+=this.vx*t,this.y+=this.vy*t},l.prototype.scale=function(t=1){this.size<7&&(this.size+=.002*this.size*t),this.vx+=.008*this.vx*t,this.vy+=.008*this.vy*t},l.prototype.draw=function(){a.beginPath(),a.ellipse(this.x,this.y,this.size/2,this.size/2,0,0,2*Math.PI),a.closePath(),a.fillStyle="white",a.fill()};const c=document.getElementById("stars"),d=c.getContext("2d");let g=0,y=!1;const p=(t,e)=>e.x-t.x<e.size&&e.x-t.x>-e.size&&e.y-t.y<e.size/2&&e.y-t.y>-e.size/2&&!0===t.visible,u=(t,e)=>{e.visible=!y;for(let t=0;t<e.shots.length;t++)e.shots[t].hit=y;for(let e=0;e<t.length;e++)t[e].visible=!y},f=(t,e)=>{y=!0,u(t,e),d.fillStyle="white",d.textAlign="center",d.font="60px monospace",d.fillText("GAME OVER",c.width/2,c.height/2),d.font="38px monospace",d.fillText("Tap to restart",c.width/2,c.height/2+80),c.addEventListener("pointerup",()=>{y=!1,u(t,e),t=v(),e.resetSize(),e.setPosition(c.width/2,c.height/6*5),w(e,t)},{once:!0})},m=(t,e)=>{((t,e)=>{for(let i=0;i<t.length;i++){const o=t[i];p(o,e)&&(e.visible=!1,f(t,e))}})(t,e),((t,e)=>{for(let i=0;i<t.length;i++){let o=t[i];for(let n=0;n<e.length;n++){const s=e[n];s.x-o.x<o.size&&s.x-o.x>-o.size&&s.y-o.y<o.size&&s.y-o.y>-o.size&&!0===o.visible&&(s.hit=!0,o=t.splice(i,1,new l(c.width/2,c.height/3))[0],o.move(Math.random()*(c.width/3)))}}})(t,e.shots)},w=(t,e)=>{d.clearRect(0,0,c.width,c.height),d.fillStyle="white",d.textAlign="left",d.font="24px mono",d.fillText("SCORE: "+g,10,30),(t=>{for(let e=0;e<t.length;e++){let i=t[e];i.visible?i.draw():Math.random()>.1&&(i.visible=!0),i.move(),i.x>c.width-i.size||i.x<i.size||i.y>c.height-i.size||i.y<i.size?(i.y>c.height-i.size&&g++,i=t.splice(e,1,new l(c.width/2,c.height/3))[0],i.move(Math.random()*(c.width/3))):i.scale()}})(e),t.visible&&t.draw(),t.shots=t.shots.filter(t=>((t=>{t.y=t.y-4,0===t.y&&(t.hit=!0),t.draw()})(t),!t.hit)),m(e,t),y||window.requestAnimationFrame(()=>w(t,e))};function v(){const t=[];for(let e=0;e<200;e++){const e=new l(x.width/2,x.height/3);e.move(Math.random()*(x.width/3)),t.push(e)}return t}const x=document.getElementById("stars");x.width=window.innerWidth,x.height=window.innerHeight;const z=v(),C=new r(x.width/2,x.height/6*5);var b;b=C,window.onkeydown=t=>{switch(t.key){case"ArrowLeft":case"KeyA":b.moveHorizontally(-1);break;case"ArrowRight":case"KeyD":b.moveHorizontally(1);break;case"ArrowUp":case"KeyW":b.moveVertically(-.4);break;case"ArrowDown":case"KeyS":b.moveVertically(.4);break;case"KeyZ":b.fireShot()}},function(){let t=!1;return"maxTouchPoints"in navigator?t=navigator.maxTouchPoints>0:"msMaxTouchPoints"in navigator&&(t=navigator.msMaxTouchPoints>0),t}()||(window.onwheel=t=>{b.moveHorizontally(t.deltaX),b.moveVertically(t.deltaY)}),window.onclick=t=>{b.fireShot(t.clientX,t.clientY)},((t,e)=>{const i=(t,e,i)=>Math.min(Math.max(t,e),i);let o=0,n=0;window.addEventListener("deviceorientation",t=>{o=i(t.beta,-90,90),n=t.gamma},{once:!0}),window.addEventListener("deviceorientation",s=>{const r=i(s.beta-o,-90,90),h=s.gamma-n;t.moveHorizontally(h/40),t.moveVertically(r/20);for(let t=0;t<e.length;t++)e[t].x-=h/5,e[t].y+=r/5})})(C,z),window.requestAnimationFrame(()=>w(C,z))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbnZhcy1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoaXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xvb3AuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy91dGlscy5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkNhbnZhc09iamVjdCIsImluaXRpYWxYIiwiaW5pdGlhbFkiLCJzaXplIiwidmlzaWJsZSIsInRoaXMiLCJ4IiwieSIsImNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsIlNoaXAiLCJzaG90cyIsIlNob3QiLCJvcmlnaW5YIiwib3JpZ2luWSIsInRhcmdldFgiLCJ0YXJnZXRZIiwiaGl0IiwiY29uc3RydWN0b3IiLCJzZXRQb3NpdGlvbiIsInJlc2V0U2l6ZSIsImdldE5vc2VYQ29vcmRpbmF0ZSIsImdldE5vc2VZQ29vcmRpbmF0ZSIsImdldExlZnRXaW5nWENvb3JkaW5hdGUiLCJnZXRSaWdodFdpbmdYQ29vcmRpbmF0ZSIsImdldFdpbmdzWUNvb3JkaW5hdGUiLCJnZXRUb3BYQ29vcmRpbmF0ZSIsImdldFRvcFlDb29yZGluYXRlIiwiZ2V0UmVhclhDb29yZGluYXRlIiwiZ2V0UmVhcllDb29yZGluYXRlIiwibW92ZVZlcnRpY2FsbHkiLCJzcGVlZCIsImRlbHRhWCIsIndpZHRoIiwiZGVsdGFZIiwiaGVpZ2h0IiwiZGlyZWN0aW9uIiwiTWF0aCIsImF0YW4yIiwiY29zIiwic2luIiwibW92ZUhvcml6b250YWxseSIsImRyYXciLCJob3Jpem9udGFsU2tldyIsInNldFRyYW5zZm9ybSIsIkRPTU1hdHJpeCIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsImNsb3NlUGF0aCIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwic3Ryb2tlIiwiZmlyZVNob3QiLCJwdXNoIiwiZWxsaXBzZSIsIlBJIiwiZmlsbFN0eWxlIiwiZmlsbCIsIlN0YXIiLCJyYW5kb20iLCJ2eCIsIm1pbiIsInZ5IiwibW92ZSIsIm1vdmVtZW50RmFjdG9yIiwic2NhbGUiLCJzY2FsZUZhY3RvciIsInNjb3JlIiwiZ2FtZU92ZXIiLCJpc1NoaXBDb2xsaWRpbmciLCJzdGFyIiwic2hpcCIsInRvZ2dsZU9iamVjdHNWaXNpYmlsaXR5Iiwic3RhcnMiLCJsZW5ndGgiLCJlbmRHYW1lIiwidGV4dEFsaWduIiwiZm9udCIsImZpbGxUZXh0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImdldE5ld1N0YXJzIiwiYW5pbWF0ZSIsIm9uY2UiLCJjaGVja0NvbGxpc2lvbnMiLCJjaGVja1NoaXBDb2xsaXNpb25zIiwiaiIsInNob3QiLCJzcGxpY2UiLCJjaGVja1Nob3RzQ29sbGlzaW9ucyIsImNsZWFyUmVjdCIsImFuaW1hdGVTdGFycyIsImZpbHRlciIsImFuaW1hdGVTaG90Iiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0Iiwib25rZXlkb3duIiwiZSIsImhhc1RvdWNoU2NyZWVuIiwibmF2aWdhdG9yIiwibWF4VG91Y2hQb2ludHMiLCJtc01heFRvdWNoUG9pbnRzIiwiZGV2aWNlSGFzVG91Y2hTY3JlZW4iLCJvbndoZWVsIiwib25jbGljayIsImNsaWVudFgiLCJjbGllbnRZIiwiY2xhbXAiLCJtYXgiLCJpbml0aWFsQmV0YSIsImluaXRpYWxHYW1tYSIsImV2ZW50IiwiYmV0YSIsImdhbW1hIiwibGlzdGVuVG9PcmllbnRhdGlvbkNoYW5nZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxP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LFVBQ3BCRCxFQUFpQkMsVUFBVUMsZUFBaUIsRUFFdkMscUJBQXNCRCxZQUMzQkQsRUFBaUJDLFVBQVVFLGlCQUFtQixHQUczQ0gsRURxQ0ZJLEtBQ0RWLE9BQU9XLFFBQVdOLElBQ2QzQixFQUFLL0IsaUJBQWlCMEQsRUFBRW5FLFFBQ3hCd0MsRUFBSzFDLGVBQWVxRSxFQUFFakUsVUFJOUI0RCxPQUFPWSxRQUFXUCxJQUNkM0IsRUFBS25CLFNBQVM4QyxFQUFFUSxRQUFTUixFQUFFUyxVQUlELEVBQUNwQyxFQUFNRSxLQUNyQyxNQUFNbUMsRUFBUSxDQUFDL0gsRUFBT2dGLEVBQUtnRCxJQUNoQnpFLEtBQUt5QixJQUFJekIsS0FBS3lFLElBQUloSSxFQUFPZ0YsR0FBTWdELEdBRzFDLElBQUlDLEVBQWMsRUFDZEMsRUFBZSxFQW9CbkJsQixPQUFPZCxpQkFBaUIsb0JBbEJDaUMsSUFDckJGLEVBQWNGLEVBQU1JLEVBQU1DLE1BQU8sR0FBSSxJQUNyQ0YsRUFBZUMsRUFBTUUsT0FnQnFDLENBQUVoQyxNQUFNLElBQ3RFVyxPQUFPZCxpQkFBaUIsb0JBZEtpQyxJQUN6QixNQUFNQyxFQUFPTCxFQUFNSSxFQUFNQyxLQUFPSCxHQUFjLEdBQUksSUFDNUNJLEVBQVFGLEVBQU1FLE1BQVFILEVBRTVCeEMsRUFBSy9CLGlCQUFpQjBFLEVBQVEsSUFDOUIzQyxFQUFLMUMsZUFBZW9GLEVBQU8sSUFFM0IsSUFBSyxJQUFJckosRUFBSSxFQUFHQSxFQUFJNkcsRUFBTUMsT0FBUTlHLElBQzlCNkcsRUFBTTdHLEdBQUdzQyxHQUFLZ0gsRUFBUSxFQUN0QnpDLEVBQU03RyxHQUFHdUMsR0FBSzhHLEVBQU8sS0FtQmpDRSxDQUEwQixFQUFNLEdBRWhDdEIsT0FBT0Msc0JBQXNCLElBQU1iLEVBQVEsRUFBTSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIENhbnZhc09iamVjdChpbml0aWFsWCwgaW5pdGlhbFksIHNpemUsIHZpc2libGUpIHtcbiAgICB0aGlzLnggPSBpbml0aWFsWDtcbiAgICB0aGlzLnkgPSBpbml0aWFsWTtcbiAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgIHRoaXMudmlzaWJsZSA9IHZpc2libGU7XG59XG4iLCJpbXBvcnQgeyBDYW52YXNPYmplY3QgfSBmcm9tIFwiLi9jYW52YXMtb2JqZWN0XCI7XG5cbmNvbnN0IFNISVBfU0laRSA9IDMwO1xuY29uc3QgU0hJUF9TQ0FMRSA9IDIwO1xuY29uc3QgU0hJUF9MSU5FX1dJRFRIID0gMS41O1xuZXhwb3J0IGNvbnN0IFNISVBfSE9SSVpPTlRBTF9TUEVFRCA9IDE7XG5leHBvcnQgY29uc3QgU0hJUF9WRVJUSUNBTF9TUEVFRCA9IDAuNDtcblxuY29uc3QgU0hPVF9TSVpFID0gNDtcbmV4cG9ydCBjb25zdCBTSE9UX1NQRUVEID0gNDtcblxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJzJyk7XG5jb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbmV4cG9ydCBmdW5jdGlvbiBTaGlwKGluaXRpYWxYLCBpbml0aWFsWSkge1xuICAgIENhbnZhc09iamVjdC5jYWxsKHRoaXMsIGluaXRpYWxYLCBpbml0aWFsWSwgU0hJUF9TSVpFLCB0cnVlKTtcblxuICAgIHRoaXMuc2hvdHMgPSBbXTtcbn1cblxuU2hpcC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENhbnZhc09iamVjdC5wcm90b3R5cGUpO1xuU2hpcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTaGlwO1xuXG5TaGlwLnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xufTtcblxuU2hpcC5wcm90b3R5cGUucmVzZXRTaXplID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc2l6ZSA9IFNISVBfU0laRTtcbn07XG5cblNoaXAucHJvdG90eXBlLmdldE5vc2VYQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy54O1xufTtcblxuU2hpcC5wcm90b3R5cGUuZ2V0Tm9zZVlDb29yZGluYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnkgLSB0aGlzLnNpemUgLyAyO1xufTtcblxuU2hpcC5wcm90b3R5cGUuZ2V0TGVmdFdpbmdYQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy54IC0gdGhpcy5zaXplO1xufTtcblxuU2hpcC5wcm90b3R5cGUuZ2V0UmlnaHRXaW5nWENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMueCArIHRoaXMuc2l6ZTtcbn07XG5cblNoaXAucHJvdG90eXBlLmdldFdpbmdzWUNvb3JkaW5hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMueSArIHRoaXMuc2l6ZSAvIDQ7XG59O1xuXG5TaGlwLnByb3RvdHlwZS5nZXRUb3BYQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy54O1xufTtcblxuU2hpcC5wcm90b3R5cGUuZ2V0VG9wWUNvb3JkaW5hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMueSAtIHRoaXMuc2l6ZSAvIDg7XG59O1xuXG5TaGlwLnByb3RvdHlwZS5nZXRSZWFyWENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMueDtcbn07XG5cblNoaXAucHJvdG90eXBlLmdldFJlYXJZQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy55ICsgdGhpcy5zaXplIC8gMztcbn07XG5cblNoaXAucHJvdG90eXBlLm1vdmVWZXJ0aWNhbGx5ID0gZnVuY3Rpb24gKHNwZWVkKSB7XG4gICAgY29uc3QgZGVsdGFYID0gY2FudmFzLndpZHRoLzIgLSB0aGlzLng7XG4gICAgY29uc3QgZGVsdGFZID0gY2FudmFzLmhlaWdodC8yIC0gdGhpcy55O1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IE1hdGguYXRhbjIoZGVsdGFZLCBkZWx0YVgpO1xuICAgIHRoaXMueCAtPSBzcGVlZCAqIE1hdGguY29zKGRpcmVjdGlvbik7XG5cbiAgICBpZiAodGhpcy55ID4gY2FudmFzLmhlaWdodC8yKSB7XG4gICAgICAgIHRoaXMueSAtPSBzcGVlZCAqIE1hdGguc2luKGRpcmVjdGlvbik7XG4gICAgICAgIHRoaXMuc2l6ZSArPSBzcGVlZCAvIFNISVBfU0NBTEU7XG4gICAgfVxufTtcblxuU2hpcC5wcm90b3R5cGUubW92ZUhvcml6b250YWxseSA9IGZ1bmN0aW9uIChzcGVlZCkge1xuICAgIHRoaXMueCArPSBzcGVlZDtcbn07XG5cblNoaXAucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgaG9yaXpvbnRhbFNrZXcgPSAyICogdGhpcy5nZXRUb3BYQ29vcmRpbmF0ZSgpIC8gY2FudmFzLndpZHRoIC0gMTtcbiAgICBjb250ZXh0LnNldFRyYW5zZm9ybShuZXcgRE9NTWF0cml4KFsxLCAwLCBob3Jpem9udGFsU2tldywgMSwgMCwgMF0pKTtcblxuICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cbiAgICBjb250ZXh0Lm1vdmVUbyh0aGlzLmdldExlZnRXaW5nWENvb3JkaW5hdGUoKSwgdGhpcy5nZXRXaW5nc1lDb29yZGluYXRlKCkpO1xuICAgIGNvbnRleHQubGluZVRvKHRoaXMuZ2V0Tm9zZVhDb29yZGluYXRlKCksIHRoaXMuZ2V0Tm9zZVlDb29yZGluYXRlKCkpO1xuICAgIGNvbnRleHQubGluZVRvKHRoaXMuZ2V0UmlnaHRXaW5nWENvb3JkaW5hdGUoKSwgdGhpcy5nZXRXaW5nc1lDb29yZGluYXRlKCkpO1xuICAgIGNvbnRleHQubGluZVRvKHRoaXMuZ2V0UmVhclhDb29yZGluYXRlKCksIHRoaXMuZ2V0UmVhcllDb29yZGluYXRlKCkpO1xuICAgIGNvbnRleHQubGluZVRvKHRoaXMuZ2V0TGVmdFdpbmdYQ29vcmRpbmF0ZSgpLCB0aGlzLmdldFdpbmdzWUNvb3JkaW5hdGUoKSk7XG5cbiAgICBjb250ZXh0Lm1vdmVUbyh0aGlzLmdldFRvcFhDb29yZGluYXRlKCksIHRoaXMuZ2V0VG9wWUNvb3JkaW5hdGUoKSk7XG4gICAgY29udGV4dC5saW5lVG8odGhpcy5nZXRMZWZ0V2luZ1hDb29yZGluYXRlKCksIHRoaXMuZ2V0V2luZ3NZQ29vcmRpbmF0ZSgpKTtcblxuICAgIGNvbnRleHQubW92ZVRvKHRoaXMuZ2V0VG9wWENvb3JkaW5hdGUoKSwgdGhpcy5nZXRUb3BZQ29vcmRpbmF0ZSgpKTtcbiAgICBjb250ZXh0LmxpbmVUbyh0aGlzLmdldFJpZ2h0V2luZ1hDb29yZGluYXRlKCksIHRoaXMuZ2V0V2luZ3NZQ29vcmRpbmF0ZSgpKTtcblxuICAgIGNvbnRleHQubW92ZVRvKHRoaXMuZ2V0VG9wWENvb3JkaW5hdGUoKSwgdGhpcy5nZXRUb3BZQ29vcmRpbmF0ZSgpKTtcbiAgICBjb250ZXh0LmxpbmVUbyh0aGlzLmdldE5vc2VYQ29vcmRpbmF0ZSgpLCB0aGlzLmdldE5vc2VZQ29vcmRpbmF0ZSgpKTtcblxuICAgIGNvbnRleHQgLmNsb3NlUGF0aCgpO1xuICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIndoaXRlXCI7XG4gICAgY29udGV4dC5saW5lV2lkdGggPSBTSElQX0xJTkVfV0lEVEg7XG4gICAgY29udGV4dC5zdHJva2UoKTtcblxuICAgIGNvbnRleHQuc2V0VHJhbnNmb3JtKCk7XG59O1xuXG5TaGlwLnByb3RvdHlwZS5maXJlU2hvdCA9IGZ1bmN0aW9uICh0YXJnZXRYLCB0YXJnZXRZKSB7XG4gICAgdGhpcy5zaG90cy5wdXNoKG5ldyBTaG90KHRoaXMuZ2V0Tm9zZVhDb29yZGluYXRlKCksIHRoaXMuZ2V0Tm9zZVlDb29yZGluYXRlKCksIHRhcmdldFgsIHRhcmdldFkpKTtcbn07XG5cbmZ1bmN0aW9uIFNob3Qob3JpZ2luWCwgb3JpZ2luWSwgdGFyZ2V0WCwgdGFyZ2V0WSkge1xuICAgIENhbnZhc09iamVjdC5jYWxsKHRoaXMsIG9yaWdpblgsIG9yaWdpblksIFNIT1RfU0laRSwgbnVsbCk7XG5cbiAgICB0aGlzLnRhcmdldFggPSB0YXJnZXRYO1xuICAgIHRoaXMudGFyZ2V0WSA9IHRhcmdldFk7XG4gICAgdGhpcy5oaXQgPSBmYWxzZTtcbn1cblxuU2hvdC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENhbnZhc09iamVjdC5wcm90b3R5cGUpO1xuU2hvdC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTaG90O1xuXG5TaG90LnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgY29udGV4dC5lbGxpcHNlKHRoaXMueCwgdGhpcy55LCB0aGlzLnNpemUgLyAyLCB0aGlzLnNpemUgLyAyLCAwLCAwLCAyICogTWF0aC5QSSk7XG4gICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IFwiZ3JleVwiO1xuICAgIGNvbnRleHQuZmlsbCgpO1xufTtcbiIsImltcG9ydCB7IENhbnZhc09iamVjdCB9IGZyb20gXCIuL2NhbnZhcy1vYmplY3RcIjtcblxuZXhwb3J0IGNvbnN0IE1JTl9TVEFSX1NJWkUgPSAwLjI7XG5leHBvcnQgY29uc3QgTUFYX1NUQVJfU0laRSA9IDc7XG5jb25zdCBNQVhfSU5JVElBTF9TVEFSX1NJWkUgPSBNQVhfU1RBUl9TSVpFIC8gMjtcbmNvbnN0IEJBU0VfU0laRV9TQ0FMRV9GQUNUT1IgPSAwLjAwMjtcbmNvbnN0IEJBU0VfU1BFRURfU0NBTEVfRkFDVE9SID0gMC4wMDg7XG5cbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFycycpO1xuY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG5leHBvcnQgZnVuY3Rpb24gU3Rhcihpbml0aWFsWCwgaW5pdGlhbFkpIHtcbiAgICBjb25zdCBzaXplID0gTWF0aC5yYW5kb20oKSAqIChNQVhfSU5JVElBTF9TVEFSX1NJWkUgLSBNSU5fU1RBUl9TSVpFKSArIE1JTl9TVEFSX1NJWkU7XG4gICAgQ2FudmFzT2JqZWN0LmNhbGwodGhpcywgaW5pdGlhbFgsIGluaXRpYWxZLCBzaXplLCBmYWxzZSk7XG5cbiAgICB0aGlzLmluaXRpYWxYID0gaW5pdGlhbFg7XG4gICAgdGhpcy5pbml0aWFsWSA9IGluaXRpYWxZO1xuICAgIHRoaXMudnggPSBNYXRoLm1pbigxLCB0aGlzLnNpemUgLyAyKSAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTtcbiAgICB0aGlzLnZ5ID0gTWF0aC5taW4oMSwgdGhpcy5zaXplIC8gMikgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSk7XG59XG5cblN0YXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDYW52YXNPYmplY3QucHJvdG90eXBlKTtcblN0YXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3RhcjtcblxuU3Rhci5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uIChtb3ZlbWVudEZhY3RvciA9IDEpIHtcbiAgICB0aGlzLnggKz0gdGhpcy52eCAqIG1vdmVtZW50RmFjdG9yO1xuICAgIHRoaXMueSArPSB0aGlzLnZ5ICogbW92ZW1lbnRGYWN0b3I7XG59O1xuXG5TdGFyLnByb3RvdHlwZS5zY2FsZSA9IGZ1bmN0aW9uIChzY2FsZUZhY3RvciA9IDEpIHtcbiAgICBpZiAodGhpcy5zaXplIDwgTUFYX1NUQVJfU0laRSkge1xuICAgICAgICB0aGlzLnNpemUgKz0gdGhpcy5zaXplICogQkFTRV9TSVpFX1NDQUxFX0ZBQ1RPUiAqIHNjYWxlRmFjdG9yO1xuICAgIH1cblxuICAgIHRoaXMudnggKz0gdGhpcy52eCAqICBCQVNFX1NQRUVEX1NDQUxFX0ZBQ1RPUiAqIHNjYWxlRmFjdG9yO1xuICAgIHRoaXMudnkgKz0gdGhpcy52eSAqIEJBU0VfU1BFRURfU0NBTEVfRkFDVE9SICogc2NhbGVGYWN0b3I7XG59O1xuXG5TdGFyLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgY29udGV4dC5lbGxpcHNlKHRoaXMueCwgdGhpcy55LCB0aGlzLnNpemUgLyAyLCB0aGlzLnNpemUgLyAyLCAwLCAwLCAyICogTWF0aC5QSSk7XG4gICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcbiAgICBjb250ZXh0LmZpbGwoKTtcbn07XG4iLCJpbXBvcnQgeyBTSE9UX1NQRUVEIH0gZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IHsgU3RhciB9IGZyb20gXCIuL3N0YXJcIjtcbmltcG9ydCB7IGdldE5ld1N0YXJzIH0gZnJvbSBcIi5cIjtcblxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJzJyk7XG5jb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbmxldCBzY29yZSA9IDA7XG5sZXQgZ2FtZU92ZXIgPSBmYWxzZTtcblxuY29uc3Qgc2hvd1Njb3JlID0gKCkgPT4ge1xuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xuICAgIGNvbnRleHQudGV4dEFsaWduID0gXCJsZWZ0XCI7XG4gICAgY29udGV4dC5mb250ID0gXCIyNHB4IG1vbm9cIjtcbiAgICBjb250ZXh0LmZpbGxUZXh0KFwiU0NPUkU6IFwiICsgc2NvcmUsIDEwLCAzMCk7XG59O1xuXG5leHBvcnQgY29uc3QgYW5pbWF0ZVN0YXJzID0gKHN0YXJzKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGFycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgc3RhciA9IHN0YXJzW2ldO1xuXG4gICAgICAgIGlmIChzdGFyLnZpc2libGUpIHtcbiAgICAgICAgICAgIHN0YXIuZHJhdygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjEpIHtcbiAgICAgICAgICAgIHN0YXIudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBzdGFyLm1vdmUoKTtcblxuICAgICAgICBpZiAoc3Rhci54ID4gY2FudmFzLndpZHRoIC0gc3Rhci5zaXplIHx8IHN0YXIueCA8IHN0YXIuc2l6ZVxuICAgICAgICAgICAgfHwgc3Rhci55ID4gY2FudmFzLmhlaWdodCAtIHN0YXIuc2l6ZSB8fCBzdGFyLnkgPCBzdGFyLnNpemUpIHtcbiAgICAgICAgICAgIGlmIChzdGFyLnkgPiBjYW52YXMuaGVpZ2h0IC0gc3Rhci5zaXplKSB7XG4gICAgICAgICAgICAgICAgc2NvcmUrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3RhciA9IHN0YXJzLnNwbGljZShpLCAxLCBuZXcgU3RhcihjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMykpWzBdO1xuICAgICAgICAgICAgc3Rhci5tb3ZlKE1hdGgucmFuZG9tKCkgKiAoY2FudmFzLndpZHRoLzMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXIuc2NhbGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmNvbnN0IGFuaW1hdGVTaG90ID0gKHNob3QpID0+IHtcbiAgICBzaG90LnkgPSBzaG90LnkgLSBTSE9UX1NQRUVEO1xuICAgIFxuICAgIGlmIChzaG90LnkgPT09IDApIHtcbiAgICAgICAgc2hvdC5oaXQgPSB0cnVlO1xuICAgIH1cbiAgICBcbiAgICBzaG90LmRyYXcoKTtcbn07XG5cbmNvbnN0IGlzU2hpcENvbGxpZGluZyA9IChzdGFyLCBzaGlwKSA9PiB7XG4gICAgaWYgKHNoaXAueCAtIHN0YXIueCA8IHNoaXAuc2l6ZSAmJiBzaGlwLnggLSBzdGFyLnggPiAtc2hpcC5zaXplXG4gICAgICAgICYmIHNoaXAueSAtIHN0YXIueSA8IHNoaXAuc2l6ZSAvIDIgJiYgc2hpcC55IC0gc3Rhci55ID4gLXNoaXAuc2l6ZSAvIDJcbiAgICAgICAgJiYgc3Rhci52aXNpYmxlID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cbmNvbnN0IGRyYXdHYW1lT3ZlciA9ICgpID0+IHtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcbiAgICBjb250ZXh0LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgY29udGV4dC5mb250ID0gXCI2MHB4IG1vbm9zcGFjZVwiO1xuICAgIGNvbnRleHQuZmlsbFRleHQoXCJHQU1FIE9WRVJcIiwgY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIpO1xuXG4gICAgY29udGV4dC5mb250ID0gXCIzOHB4IG1vbm9zcGFjZVwiO1xuICAgIGNvbnRleHQuZmlsbFRleHQoXCJUYXAgdG8gcmVzdGFydFwiLCBjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMiArIDgwKTtcbn07XG5cbmNvbnN0IHRvZ2dsZU9iamVjdHNWaXNpYmlsaXR5ID0gKHN0YXJzLCBzaGlwKSA9PiB7XG4gICAgc2hpcC52aXNpYmxlID0gIWdhbWVPdmVyO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5zaG90cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzaGlwLnNob3RzW2ldLmhpdCA9IGdhbWVPdmVyO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc3RhcnNbaV0udmlzaWJsZSA9ICFnYW1lT3ZlcjtcbiAgICB9XG59O1xuXG5jb25zdCBlbmRHYW1lID0gKHN0YXJzLCBzaGlwKSA9PiB7XG4gICAgZ2FtZU92ZXIgPSB0cnVlO1xuXG4gICAgdG9nZ2xlT2JqZWN0c1Zpc2liaWxpdHkoc3RhcnMsIHNoaXApO1xuXG4gICAgZHJhd0dhbWVPdmVyKCk7XG5cbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgXCJwb2ludGVydXBcIixcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgZ2FtZU92ZXIgPSBmYWxzZTtcblxuICAgICAgICAgICAgdG9nZ2xlT2JqZWN0c1Zpc2liaWxpdHkoc3RhcnMsIHNoaXApO1xuXG4gICAgICAgICAgICBzdGFycyA9IGdldE5ld1N0YXJzKCk7XG4gICAgICAgICAgICBzaGlwLnJlc2V0U2l6ZSgpO1xuICAgICAgICAgICAgc2hpcC5zZXRQb3NpdGlvbihjYW52YXMud2lkdGggLyAyLCAoY2FudmFzLmhlaWdodCAvIDYpICogNSk7XG5cbiAgICAgICAgICAgIGFuaW1hdGUoc2hpcCwgc3RhcnMpO1xuICAgICAgICB9LFxuICAgICAgICB7IG9uY2U6IHRydWUgfVxuICAgICk7XG59O1xuXG5jb25zdCBjaGVja1NoaXBDb2xsaXNpb25zID0gKHN0YXJzLCBzaGlwKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGFycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzdGFyID0gc3RhcnNbaV07XG4gICAgICAgIGlmIChpc1NoaXBDb2xsaWRpbmcoc3Rhciwgc2hpcCkpIHtcbiAgICAgICAgICAgIHNoaXAudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgZW5kR2FtZShzdGFycywgc2hpcCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5jb25zdCBjaGVja1Nob3RzQ29sbGlzaW9ucyA9IChzdGFycywgc2hvdHMpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBzdGFyID0gc3RhcnNbaV07XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2hvdHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHNob3QgPSBzaG90c1tqXTtcbiAgICAgICAgICAgIGlmIChzaG90LnggLSBzdGFyLnggPCBzdGFyLnNpemUgJiYgc2hvdC54IC0gc3Rhci54ID4gLXN0YXIuc2l6ZVxuICAgICAgICAgICAgICAgICYmIHNob3QueSAtIHN0YXIueSA8IHN0YXIuc2l6ZSAmJiBzaG90LnkgLSBzdGFyLnkgPiAtc3Rhci5zaXplXG4gICAgICAgICAgICAgICAgJiYgc3Rhci52aXNpYmxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgc2hvdC5oaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHN0YXIgPSBzdGFycy5zcGxpY2UoaSwgMSwgbmV3IFN0YXIoY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDMpKVswXTtcbiAgICAgICAgICAgICAgICBzdGFyLm1vdmUoTWF0aC5yYW5kb20oKSAqIChjYW52YXMud2lkdGgvMykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuY29uc3QgY2hlY2tDb2xsaXNpb25zID0gKHN0YXJzLCBzaGlwKSA9PiB7XG4gICAgY2hlY2tTaGlwQ29sbGlzaW9ucyhzdGFycywgc2hpcCk7XG5cbiAgICBjaGVja1Nob3RzQ29sbGlzaW9ucyhzdGFycywgc2hpcC5zaG90cyk7XG59O1xuXG5leHBvcnQgY29uc3QgYW5pbWF0ZSA9IChzaGlwLCBzdGFycykgPT4ge1xuICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICBzaG93U2NvcmUoKTtcblxuICAgIGFuaW1hdGVTdGFycyhzdGFycyk7XG5cbiAgICBpZiAoc2hpcC52aXNpYmxlKSB7XG4gICAgICAgIHNoaXAuZHJhdygpO1xuICAgIH1cblxuICAgIHNoaXAuc2hvdHMgPSBzaGlwLnNob3RzLmZpbHRlcigoc2hvdCkgPT4ge1xuICAgICAgICBhbmltYXRlU2hvdChzaG90KTtcblxuICAgICAgICByZXR1cm4gIXNob3QuaGl0O1xuICAgIH0pO1xuXG4gICAgY2hlY2tDb2xsaXNpb25zKHN0YXJzLCBzaGlwKTtcbiAgICBcbiAgICBpZiAoIWdhbWVPdmVyKSB7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gYW5pbWF0ZShzaGlwLCBzdGFycykpO1xuICAgIH1cbn07XG4iLCJpbXBvcnQgeyBTaGlwLCBTSElQX0hPUklaT05UQUxfU1BFRUQsIFNISVBfVkVSVElDQUxfU1BFRUQgfSBmcm9tIFwiLi9zaGlwXCI7XG5pbXBvcnQgeyBTdGFyIH0gZnJvbSBcIi4vc3RhclwiO1xuaW1wb3J0IHsgYW5pbWF0ZSB9IGZyb20gXCIuL2xvb3BcIjtcbmltcG9ydCB7IGRldmljZUhhc1RvdWNoU2NyZWVuIH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuY29uc3QgTUFYX1NUQVJTID0gMjAwO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV3U3RhcnMoKSB7XG4gICAgY29uc3Qgc3RhcnMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1BWF9TVEFSUzsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHN0YXIgPSBuZXcgU3RhcihjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMyk7XG5cbiAgICAgICAgc3Rhci5tb3ZlKE1hdGgucmFuZG9tKCkgKiAoY2FudmFzLndpZHRoLzMpKTtcblxuICAgICAgICBzdGFycy5wdXNoKHN0YXIpO1xuICAgIH1cblxuICAgIHJldHVybiBzdGFycztcbn1cblxuY29uc3QgYmluZEtleXMgPSAoc2hpcCkgPT4ge1xuICAgIHdpbmRvdy5vbmtleWRvd24gPSAoZSkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XG4gICAgICAgICAgICBjYXNlIFwiS2V5QVwiOlxuICAgICAgICAgICAgICAgIHNoaXAubW92ZUhvcml6b250YWxseSgtU0hJUF9IT1JJWk9OVEFMX1NQRUVEKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6XG4gICAgICAgICAgICBjYXNlIFwiS2V5RFwiOlxuICAgICAgICAgICAgICAgIHNoaXAubW92ZUhvcml6b250YWxseShTSElQX0hPUklaT05UQUxfU1BFRUQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFycm93VXBcIjpcbiAgICAgICAgICAgIGNhc2UgXCJLZXlXXCI6XG4gICAgICAgICAgICAgICAgc2hpcC5tb3ZlVmVydGljYWxseSgtU0hJUF9WRVJUSUNBTF9TUEVFRCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dEb3duXCI6XG4gICAgICAgICAgICBjYXNlIFwiS2V5U1wiOlxuICAgICAgICAgICAgICAgIHNoaXAubW92ZVZlcnRpY2FsbHkoU0hJUF9WRVJUSUNBTF9TUEVFRCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiS2V5WlwiOlxuICAgICAgICAgICAgICAgIHNoaXAuZmlyZVNob3QoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKCFkZXZpY2VIYXNUb3VjaFNjcmVlbigpKSB7XG4gICAgICAgIHdpbmRvdy5vbndoZWVsID0gKGUpID0+IHtcbiAgICAgICAgICAgIHNoaXAubW92ZUhvcml6b250YWxseShlLmRlbHRhWCk7XG4gICAgICAgICAgICBzaGlwLm1vdmVWZXJ0aWNhbGx5KGUuZGVsdGFZKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB3aW5kb3cub25jbGljayA9IChlKSA9PiB7XG4gICAgICAgIHNoaXAuZmlyZVNob3QoZS5jbGllbnRYLCBlLmNsaWVudFkpO1xuICAgIH07XG59O1xuXG5jb25zdCBsaXN0ZW5Ub09yaWVudGF0aW9uQ2hhbmdlID0gKHNoaXAsIHN0YXJzKSA9PiB7XG4gICAgY29uc3QgY2xhbXAgPSAodmFsdWUsIG1pbiwgbWF4KSA9PiB7XG4gICAgICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh2YWx1ZSwgbWluKSwgbWF4KTtcbiAgICB9O1xuXG4gICAgbGV0IGluaXRpYWxCZXRhID0gMDtcbiAgICBsZXQgaW5pdGlhbEdhbW1hID0gMDtcblxuICAgIGNvbnN0IGluaXRpYWxMaXN0ZW5lciA9IChldmVudCkgPT4ge1xuICAgICAgICBpbml0aWFsQmV0YSA9IGNsYW1wKGV2ZW50LmJldGEsIC05MCwgOTApO1xuICAgICAgICBpbml0aWFsR2FtbWEgPSBldmVudC5nYW1tYTtcbiAgICB9O1xuXG4gICAgY29uc3Qgb3JpZW50YXRpb25MaXN0ZW5lciA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBiZXRhID0gY2xhbXAoZXZlbnQuYmV0YSAtIGluaXRpYWxCZXRhLCAtOTAsIDkwKTtcbiAgICAgICAgY29uc3QgZ2FtbWEgPSBldmVudC5nYW1tYSAtIGluaXRpYWxHYW1tYTtcblxuICAgICAgICBzaGlwLm1vdmVIb3Jpem9udGFsbHkoZ2FtbWEgLyA0MCk7XG4gICAgICAgIHNoaXAubW92ZVZlcnRpY2FsbHkoYmV0YSAvIDIwKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzdGFyc1tpXS54IC09IGdhbW1hIC8gNTtcbiAgICAgICAgICAgIHN0YXJzW2ldLnkgKz0gYmV0YSAvIDU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VvcmllbnRhdGlvblwiLCBpbml0aWFsTGlzdGVuZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZW9yaWVudGF0aW9uXCIsIG9yaWVudGF0aW9uTGlzdGVuZXIpO1xufTtcblxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJzJyk7XG5cbmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuY29uc3Qgc3RhcnMgPSBnZXROZXdTdGFycygpO1xuXG5jb25zdCBzaGlwID0gbmV3IFNoaXAoY2FudmFzLndpZHRoIC8gMiwgKGNhbnZhcy5oZWlnaHQgLyA2KSAqIDUpO1xuXG5iaW5kS2V5cyhzaGlwKTtcblxubGlzdGVuVG9PcmllbnRhdGlvbkNoYW5nZShzaGlwLCBzdGFycyk7XG5cbndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gYW5pbWF0ZShzaGlwLCBzdGFycykpO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGRldmljZUhhc1RvdWNoU2NyZWVuKCkge1xuICAgIGxldCBoYXNUb3VjaFNjcmVlbiA9IGZhbHNlO1xuXG4gICAgaWYgKFwibWF4VG91Y2hQb2ludHNcIiBpbiBuYXZpZ2F0b3IpIHtcbiAgICAgICAgaGFzVG91Y2hTY3JlZW4gPSBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAwO1xuICAgIH1cbiAgICBlbHNlIGlmIChcIm1zTWF4VG91Y2hQb2ludHNcIiBpbiBuYXZpZ2F0b3IpIHtcbiAgICAgICAgaGFzVG91Y2hTY3JlZW4gPSBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhhc1RvdWNoU2NyZWVuO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==