!function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";function o(t,e,i,o){this.x=t,this.y=e,this.size=i,this.visible=o}i.r(e),i.d(e,"getNewStars",(function(){return z}));const n=document.getElementById("stars"),s=n.getContext("2d");function r(t,e){o.call(this,t,e,30,!0),this.shots=[]}r.prototype=Object.create(o.prototype),r.prototype.constructor=r;const h=t=>.02*(n.width/2-t);function a(t,e,i,n){o.call(this,t,e,4,null),this.targetX=i,this.targetY=n,this.hit=!1}r.prototype.setPosition=function(t,e){this.x=t,this.y=e},r.prototype.resetSize=function(){this.size=30},r.prototype.getNoseXCoordinate=function(){return this.x},r.prototype.getNoseYCoordinate=function(){return this.y-this.size/2},r.prototype.getLeftWingXCoordinate=function(){return this.x-this.size-h(this.x)},r.prototype.getRightWingXCoordinate=function(){return this.x+this.size-h(this.x)},r.prototype.getWingsYCoordinate=function(){return this.y+this.size/4},r.prototype.getTopXCoordinate=function(){return this.x-h(this.x)},r.prototype.getTopYCoordinate=function(){return this.y-this.size/8},r.prototype.getRearXCoordinate=function(){return this.x-h(this.x)},r.prototype.getRearYCoordinate=function(){return this.y+this.size/3},r.prototype.moveVertically=function(t){const e=n.width/2-this.x,i=n.height/2-this.y,o=Math.atan2(i,e);this.x-=t*Math.cos(o),this.y>n.height/2&&(this.y-=t*Math.sin(o),this.size+=t/20)},r.prototype.moveHorizontally=function(t){this.x+=t},r.prototype.draw=function(){s.beginPath(),s.moveTo(this.getLeftWingXCoordinate(),this.getWingsYCoordinate()),s.lineTo(this.getNoseXCoordinate(),this.getNoseYCoordinate()),s.lineTo(this.getRightWingXCoordinate(),this.getWingsYCoordinate()),s.lineTo(this.getRearXCoordinate(),this.getRearYCoordinate()),s.lineTo(this.getLeftWingXCoordinate(),this.getWingsYCoordinate()),s.moveTo(this.getTopXCoordinate(),this.getTopYCoordinate()),s.lineTo(this.getLeftWingXCoordinate(),this.getWingsYCoordinate()),s.moveTo(this.getTopXCoordinate(),this.getTopYCoordinate()),s.lineTo(this.getRightWingXCoordinate(),this.getWingsYCoordinate()),s.moveTo(this.getTopXCoordinate(),this.getTopYCoordinate()),s.lineTo(this.getNoseXCoordinate(),this.getNoseYCoordinate()),s.closePath(),s.strokeStyle="white",s.lineWidth=1.5,s.stroke()},r.prototype.fireShot=function(t,e){this.shots.push(new a(this.getNoseXCoordinate(),this.getNoseYCoordinate(),t,e))},a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.prototype.draw=function(){s.beginPath(),s.ellipse(this.x,this.y,this.size/2,this.size/2,0,0,2*Math.PI),s.closePath(),s.fillStyle="grey",s.fill()};const l=document.getElementById("stars").getContext("2d");function c(t,e){const i=3.3*Math.random()+.2;o.call(this,t,e,i,!1),this.initialX=t,this.initialY=e,this.vx=Math.min(1,this.size/2)*(Math.random()-.5),this.vy=Math.min(1,this.size/2)*(Math.random()-.5)}c.prototype=Object.create(o.prototype),c.prototype.constructor=c,c.prototype.move=function(t=1){this.x+=this.vx*t,this.y+=this.vy*t},c.prototype.scale=function(t=1){this.size<7&&(this.size+=.002*this.size*t),this.vx+=.008*this.vx*t,this.vy+=.008*this.vy*t},c.prototype.draw=function(){l.beginPath(),l.ellipse(this.x,this.y,this.size/2,this.size/2,0,0,2*Math.PI),l.closePath(),l.fillStyle="white",l.fill()};const d=document.getElementById("stars"),g=d.getContext("2d");let y=0,p=!1;const u=(t,e)=>e.x-t.x<e.size&&e.x-t.x>-e.size&&e.y-t.y<e.size/2&&e.y-t.y>-e.size/2&&t.visible,f=(t,e)=>e.x-t.x<t.size&&e.x-t.x>-t.size&&e.y-t.y<t.size&&e.y-t.y>-t.size&&t.visible,m=(t,e)=>{e.visible=!p;for(let t=0;t<e.shots.length;t++)e.shots[t].hit=p;for(let e=0;e<t.length;e++)t[e].visible=!p},w=(t,e)=>{p=!0,m(t,e),g.fillStyle="white",g.textAlign="center",g.font="60px monospace",g.fillText("GAME OVER",d.width/2,d.height/2),g.font="38px monospace",g.fillText("Tap to restart",d.width/2,d.height/2+80),d.addEventListener("pointerup",()=>{p=!1,m(t,e),t=z(),e.resetSize(),e.setPosition(d.width/2,d.height/6*5),x(e,t)},{once:!0})},v=(t,e)=>{((t,e)=>{for(let i=0;i<t.length;i++){const o=t[i];u(o,e)&&(e.visible=!1,w(t,e))}})(t,e),((t,e)=>{for(let i=0;i<t.length;i++){let o=t[i];for(let n=0;n<e.length;n++){const s=e[n];f(o,s)&&(s.hit=!0,t[i]=new c(d.width/2,d.height/3),t[i].move(Math.random()*(d.width/6)))}}})(t,e.shots)},x=(t,e)=>{g.clearRect(0,0,d.width,d.height),g.fillStyle="white",g.textAlign="left",g.font="24px mono",g.fillText("SCORE: "+y,10,30),(t=>{for(let e=0;e<t.length;e++){let i=t[e];i.visible?i.draw():Math.random()>.1&&(i.visible=!0),i.move(),i.x>d.width-i.size||i.x<i.size||i.y>d.height-i.size||i.y<i.size?(i.y>d.height-i.size&&y++,t[e]=new c(d.width/2,d.height/3),t[e].move(Math.random()*(d.width/6))):i.scale()}})(e),t.visible&&t.draw(),t.shots=t.shots.filter(t=>((t=>{t.y=t.y-4,0===t.y&&(t.hit=!0),t.draw()})(t),!t.hit)),v(e,t),p||window.requestAnimationFrame(()=>x(t,e))};function z(){const t=[];for(let e=0;e<200;e++){const e=new c(C.width/2,C.height/3);e.move(Math.random()*(C.width/3)),t.push(e)}return t}const C=document.getElementById("stars");C.width=window.innerWidth,C.height=window.innerHeight;const b=z(),T=new r(C.width/2,C.height/6*5);var M;M=T,window.onkeydown=t=>{switch(t.key){case"ArrowLeft":case"KeyA":M.moveHorizontally(-1);break;case"ArrowRight":case"KeyD":M.moveHorizontally(1);break;case"ArrowUp":case"KeyW":M.moveVertically(-.4);break;case"ArrowDown":case"KeyS":M.moveVertically(.4);break;case"KeyZ":M.fireShot()}},function(){let t=!1;return"maxTouchPoints"in navigator?t=navigator.maxTouchPoints>0:"msMaxTouchPoints"in navigator&&(t=navigator.msMaxTouchPoints>0),t}()||(window.onwheel=t=>{M.moveHorizontally(t.deltaX),M.moveVertically(t.deltaY)}),window.onclick=t=>{M.fireShot(t.clientX,t.clientY)},(t=>{const e=(t,e,i)=>Math.min(Math.max(t,e),i);let i=0,o=0;window.addEventListener("deviceorientation",t=>{i=e(t.beta,-90,90),o=t.gamma},{once:!0}),window.addEventListener("deviceorientation",n=>{const s=e(n.beta-i,-90,90),r=n.gamma-o;t.moveHorizontally(r/20),t.moveVertically(s/10)})})(T),window.requestAnimationFrame(()=>x(T,b))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbnZhcy1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoaXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xvb3AuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy91dGlscy5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkNhbnZhc09iamVjdCIsImluaXRpYWxYIiwiaW5pdGlhbFkiLCJzaXplIiwidmlzaWJsZSIsInRoaXMiLCJ4IiwieSIsImNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsIlNoaXAiLCJzaG90cyIsImNvbnN0cnVjdG9yIiwiZ2V0U2hpcEhvcml6b250YWxTa2V3Iiwic2hpcFgiLCJ3aWR0aCIsIlNob3QiLCJvcmlnaW5YIiwib3JpZ2luWSIsInRhcmdldFgiLCJ0YXJnZXRZIiwiaGl0Iiwic2V0UG9zaXRpb24iLCJyZXNldFNpemUiLCJnZXROb3NlWENvb3JkaW5hdGUiLCJnZXROb3NlWUNvb3JkaW5hdGUiLCJnZXRMZWZ0V2luZ1hDb29yZGluYXRlIiwiZ2V0UmlnaHRXaW5nWENvb3JkaW5hdGUiLCJnZXRXaW5nc1lDb29yZGluYXRlIiwiZ2V0VG9wWENvb3JkaW5hdGUiLCJnZXRUb3BZQ29vcmRpbmF0ZSIsImdldFJlYXJYQ29vcmRpbmF0ZSIsImdldFJlYXJZQ29vcmRpbmF0ZSIsIm1vdmVWZXJ0aWNhbGx5Iiwic3BlZWQiLCJkZWx0YVgiLCJkZWx0YVkiLCJoZWlnaHQiLCJkaXJlY3Rpb24iLCJNYXRoIiwiYXRhbjIiLCJjb3MiLCJzaW4iLCJtb3ZlSG9yaXpvbnRhbGx5IiwiZHJhdyIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsImNsb3NlUGF0aCIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwic3Ryb2tlIiwiZmlyZVNob3QiLCJwdXNoIiwiZWxsaXBzZSIsIlBJIiwiZmlsbFN0eWxlIiwiZmlsbCIsIlN0YXIiLCJyYW5kb20iLCJ2eCIsIm1pbiIsInZ5IiwibW92ZSIsIm1vdmVtZW50RmFjdG9yIiwic2NhbGUiLCJzY2FsZUZhY3RvciIsInNjb3JlIiwiZ2FtZU92ZXIiLCJpc1NoaXBDb2xsaWRpbmciLCJzdGFyIiwic2hpcCIsImlzU2hvdENvbGxpZGluZyIsInNob3QiLCJ0b2dnbGVPYmplY3RzVmlzaWJpbGl0eSIsInN0YXJzIiwibGVuZ3RoIiwiZW5kR2FtZSIsInRleHRBbGlnbiIsImZvbnQiLCJmaWxsVGV4dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJnZXROZXdTdGFycyIsImFuaW1hdGUiLCJvbmNlIiwiY2hlY2tDb2xsaXNpb25zIiwiY2hlY2tTaGlwQ29sbGlzaW9ucyIsImoiLCJjaGVja1Nob3RzQ29sbGlzaW9ucyIsImNsZWFyUmVjdCIsImFuaW1hdGVTdGFycyIsImZpbHRlciIsImFuaW1hdGVTaG90Iiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0Iiwib25rZXlkb3duIiwiZSIsImhhc1RvdWNoU2NyZWVuIiwibmF2aWdhdG9yIiwibWF4VG91Y2hQb2ludHMiLCJtc01heFRvdWNoUG9pbnRzIiwiZGV2aWNlSGFzVG91Y2hTY3JlZW4iLCJvbndoZWVsIiwib25jbGljayIsImNsaWVudFgiLCJjbGllbnRZIiwiY2xhbXAiLCJtYXgiLCJpbml0aWFsQmV0YSIsImluaXRpYWxHYW1tYSIsImV2ZW50IiwiYmV0YSIsImdhbW1hIiwibGlzdGVuVG9PcmllbnRhdGlvbkNoYW5nZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFP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bUJBQW9CQyxVQUNwQkQsRUFBaUJDLFVBQVVDLGVBQWlCLEVBRXZDLHFCQUFzQkQsWUFDM0JELEVBQWlCQyxVQUFVRSxpQkFBbUIsR0FHM0NILEVEcUNGSSxLQUNEVixPQUFPVyxRQUFXTixJQUNkM0IsRUFBSzVCLGlCQUFpQnVELEVBQUUvRCxRQUN4Qm9DLEVBQUt0QyxlQUFlaUUsRUFBRTlELFVBSTlCeUQsT0FBT1ksUUFBV1AsSUFDZDNCLEVBQUtuQixTQUFTOEMsRUFBRVEsUUFBU1IsRUFBRVMsVUFJRCxDQUFDcEMsSUFDL0IsTUFBTXFDLEVBQVEsQ0FBQzlILEVBQU8rRSxFQUFLZ0QsSUFDaEJ0RSxLQUFLc0IsSUFBSXRCLEtBQUtzRSxJQUFJL0gsRUFBTytFLEdBQU1nRCxHQUcxQyxJQUFJQyxFQUFjLEVBQ2RDLEVBQWUsRUFlbkJsQixPQUFPWixpQkFBaUIsb0JBYkMrQixJQUNyQkYsRUFBY0YsRUFBTUksRUFBTUMsTUFBTyxHQUFJLElBQ3JDRixFQUFlQyxFQUFNRSxPQVdxQyxDQUFFOUIsTUFBTSxJQUN0RVMsT0FBT1osaUJBQWlCLG9CQVRLK0IsSUFDekIsTUFBTUMsRUFBT0wsRUFBTUksRUFBTUMsS0FBT0gsR0FBYyxHQUFJLElBQzVDSSxFQUFRRixFQUFNRSxNQUFRSCxFQUU1QnhDLEVBQUs1QixpQkFBaUJ1RSxFQUFRLElBQzlCM0MsRUFBS3RDLGVBQWVnRixFQUFPLE9Ba0JuQ0UsQ0FBMEIsR0FFMUJ0QixPQUFPQyxzQkFBc0IsSUFBTVgsRUFBUSxFQUFNIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgZnVuY3Rpb24gQ2FudmFzT2JqZWN0KGluaXRpYWxYLCBpbml0aWFsWSwgc2l6ZSwgdmlzaWJsZSkge1xuICAgIHRoaXMueCA9IGluaXRpYWxYO1xuICAgIHRoaXMueSA9IGluaXRpYWxZO1xuICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgdGhpcy52aXNpYmxlID0gdmlzaWJsZTtcbn1cbiIsImltcG9ydCB7IENhbnZhc09iamVjdCB9IGZyb20gXCIuL2NhbnZhcy1vYmplY3RcIjtcblxuY29uc3QgU0hJUF9TSVpFID0gMzA7XG5jb25zdCBTSElQX1NDQUxFID0gMjA7XG5jb25zdCBTSElQX0xJTkVfV0lEVEggPSAxLjU7XG5jb25zdCBTSElQX1NLRVdfRkFDVE9SID0gMC4wMjtcbmV4cG9ydCBjb25zdCBTSElQX0hPUklaT05UQUxfU1BFRUQgPSAxO1xuZXhwb3J0IGNvbnN0IFNISVBfVkVSVElDQUxfU1BFRUQgPSAwLjQ7XG5cbmNvbnN0IFNIT1RfU0laRSA9IDQ7XG5leHBvcnQgY29uc3QgU0hPVF9TUEVFRCA9IDQ7XG5cbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFycycpO1xuY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG5leHBvcnQgZnVuY3Rpb24gU2hpcChpbml0aWFsWCwgaW5pdGlhbFkpIHtcbiAgICBDYW52YXNPYmplY3QuY2FsbCh0aGlzLCBpbml0aWFsWCwgaW5pdGlhbFksIFNISVBfU0laRSwgdHJ1ZSk7XG5cbiAgICB0aGlzLnNob3RzID0gW107XG59XG5cblNoaXAucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDYW52YXNPYmplY3QucHJvdG90eXBlKTtcblNoaXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU2hpcDtcblxuY29uc3QgZ2V0U2hpcEhvcml6b250YWxTa2V3ID0gKHNoaXBYKSA9PiAoKGNhbnZhcy53aWR0aCAvIDIpIC0gc2hpcFgpICogU0hJUF9TS0VXX0ZBQ1RPUjtcblxuU2hpcC5wcm90b3R5cGUuc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbn07XG5cblNoaXAucHJvdG90eXBlLnJlc2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnNpemUgPSBTSElQX1NJWkU7XG59O1xuXG5TaGlwLnByb3RvdHlwZS5nZXROb3NlWENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMueDtcbn07XG5cblNoaXAucHJvdG90eXBlLmdldE5vc2VZQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy55IC0gdGhpcy5zaXplIC8gMjtcbn07XG5cblNoaXAucHJvdG90eXBlLmdldExlZnRXaW5nWENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMueCAtIHRoaXMuc2l6ZSAtIGdldFNoaXBIb3Jpem9udGFsU2tldyh0aGlzLngpO1xufTtcblxuU2hpcC5wcm90b3R5cGUuZ2V0UmlnaHRXaW5nWENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMueCArIHRoaXMuc2l6ZSAtIGdldFNoaXBIb3Jpem9udGFsU2tldyh0aGlzLngpO1xufTtcblxuU2hpcC5wcm90b3R5cGUuZ2V0V2luZ3NZQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy55ICsgdGhpcy5zaXplIC8gNDtcbn07XG5cblNoaXAucHJvdG90eXBlLmdldFRvcFhDb29yZGluYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnggLSBnZXRTaGlwSG9yaXpvbnRhbFNrZXcodGhpcy54KTtcbn07XG5cblNoaXAucHJvdG90eXBlLmdldFRvcFlDb29yZGluYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnkgLSB0aGlzLnNpemUgLyA4O1xufTtcblxuU2hpcC5wcm90b3R5cGUuZ2V0UmVhclhDb29yZGluYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnggLSBnZXRTaGlwSG9yaXpvbnRhbFNrZXcodGhpcy54KTtcbn07XG5cblNoaXAucHJvdG90eXBlLmdldFJlYXJZQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy55ICsgdGhpcy5zaXplIC8gMztcbn07XG5cblNoaXAucHJvdG90eXBlLm1vdmVWZXJ0aWNhbGx5ID0gZnVuY3Rpb24gKHNwZWVkKSB7XG4gICAgY29uc3QgZGVsdGFYID0gY2FudmFzLndpZHRoLzIgLSB0aGlzLng7XG4gICAgY29uc3QgZGVsdGFZID0gY2FudmFzLmhlaWdodC8yIC0gdGhpcy55O1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IE1hdGguYXRhbjIoZGVsdGFZLCBkZWx0YVgpO1xuICAgIHRoaXMueCAtPSBzcGVlZCAqIE1hdGguY29zKGRpcmVjdGlvbik7XG5cbiAgICBpZiAodGhpcy55ID4gY2FudmFzLmhlaWdodC8yKSB7XG4gICAgICAgIHRoaXMueSAtPSBzcGVlZCAqIE1hdGguc2luKGRpcmVjdGlvbik7XG4gICAgICAgIHRoaXMuc2l6ZSArPSBzcGVlZCAvIFNISVBfU0NBTEU7XG4gICAgfVxufTtcblxuU2hpcC5wcm90b3R5cGUubW92ZUhvcml6b250YWxseSA9IGZ1bmN0aW9uIChzcGVlZCkge1xuICAgIHRoaXMueCArPSBzcGVlZDtcbn07XG5cblNoaXAucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29udGV4dC5iZWdpblBhdGgoKTtcblxuICAgIGNvbnRleHQubW92ZVRvKHRoaXMuZ2V0TGVmdFdpbmdYQ29vcmRpbmF0ZSgpLCB0aGlzLmdldFdpbmdzWUNvb3JkaW5hdGUoKSk7XG4gICAgY29udGV4dC5saW5lVG8odGhpcy5nZXROb3NlWENvb3JkaW5hdGUoKSwgdGhpcy5nZXROb3NlWUNvb3JkaW5hdGUoKSk7XG4gICAgY29udGV4dC5saW5lVG8odGhpcy5nZXRSaWdodFdpbmdYQ29vcmRpbmF0ZSgpLCB0aGlzLmdldFdpbmdzWUNvb3JkaW5hdGUoKSk7XG4gICAgY29udGV4dC5saW5lVG8odGhpcy5nZXRSZWFyWENvb3JkaW5hdGUoKSwgdGhpcy5nZXRSZWFyWUNvb3JkaW5hdGUoKSk7XG4gICAgY29udGV4dC5saW5lVG8odGhpcy5nZXRMZWZ0V2luZ1hDb29yZGluYXRlKCksIHRoaXMuZ2V0V2luZ3NZQ29vcmRpbmF0ZSgpKTtcblxuICAgIGNvbnRleHQubW92ZVRvKHRoaXMuZ2V0VG9wWENvb3JkaW5hdGUoKSwgdGhpcy5nZXRUb3BZQ29vcmRpbmF0ZSgpKTtcbiAgICBjb250ZXh0LmxpbmVUbyh0aGlzLmdldExlZnRXaW5nWENvb3JkaW5hdGUoKSwgdGhpcy5nZXRXaW5nc1lDb29yZGluYXRlKCkpO1xuXG4gICAgY29udGV4dC5tb3ZlVG8odGhpcy5nZXRUb3BYQ29vcmRpbmF0ZSgpLCB0aGlzLmdldFRvcFlDb29yZGluYXRlKCkpO1xuICAgIGNvbnRleHQubGluZVRvKHRoaXMuZ2V0UmlnaHRXaW5nWENvb3JkaW5hdGUoKSwgdGhpcy5nZXRXaW5nc1lDb29yZGluYXRlKCkpO1xuXG4gICAgY29udGV4dC5tb3ZlVG8odGhpcy5nZXRUb3BYQ29vcmRpbmF0ZSgpLCB0aGlzLmdldFRvcFlDb29yZGluYXRlKCkpO1xuICAgIGNvbnRleHQubGluZVRvKHRoaXMuZ2V0Tm9zZVhDb29yZGluYXRlKCksIHRoaXMuZ2V0Tm9zZVlDb29yZGluYXRlKCkpO1xuXG4gICAgY29udGV4dCAuY2xvc2VQYXRoKCk7XG4gICAgY29udGV4dC5zdHJva2VTdHlsZSA9IFwid2hpdGVcIjtcbiAgICBjb250ZXh0LmxpbmVXaWR0aCA9IFNISVBfTElORV9XSURUSDtcbiAgICBjb250ZXh0LnN0cm9rZSgpO1xufTtcblxuU2hpcC5wcm90b3R5cGUuZmlyZVNob3QgPSBmdW5jdGlvbiAodGFyZ2V0WCwgdGFyZ2V0WSkge1xuICAgIHRoaXMuc2hvdHMucHVzaChuZXcgU2hvdCh0aGlzLmdldE5vc2VYQ29vcmRpbmF0ZSgpLCB0aGlzLmdldE5vc2VZQ29vcmRpbmF0ZSgpLCB0YXJnZXRYLCB0YXJnZXRZKSk7XG59O1xuXG5mdW5jdGlvbiBTaG90KG9yaWdpblgsIG9yaWdpblksIHRhcmdldFgsIHRhcmdldFkpIHtcbiAgICBDYW52YXNPYmplY3QuY2FsbCh0aGlzLCBvcmlnaW5YLCBvcmlnaW5ZLCBTSE9UX1NJWkUsIG51bGwpO1xuXG4gICAgdGhpcy50YXJnZXRYID0gdGFyZ2V0WDtcbiAgICB0aGlzLnRhcmdldFkgPSB0YXJnZXRZO1xuICAgIHRoaXMuaGl0ID0gZmFsc2U7XG59XG5cblNob3QucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDYW52YXNPYmplY3QucHJvdG90eXBlKTtcblNob3QucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU2hvdDtcblxuU2hvdC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIGNvbnRleHQuZWxsaXBzZSh0aGlzLngsIHRoaXMueSwgdGhpcy5zaXplIC8gMiwgdGhpcy5zaXplIC8gMiwgMCwgMCwgMiAqIE1hdGguUEkpO1xuICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgY29udGV4dC5maWxsU3R5bGUgPSBcImdyZXlcIjtcbiAgICBjb250ZXh0LmZpbGwoKTtcbn07XG4iLCJpbXBvcnQgeyBDYW52YXNPYmplY3QgfSBmcm9tIFwiLi9jYW52YXMtb2JqZWN0XCI7XG5cbmV4cG9ydCBjb25zdCBNSU5fU1RBUl9TSVpFID0gMC4yO1xuZXhwb3J0IGNvbnN0IE1BWF9TVEFSX1NJWkUgPSA3O1xuY29uc3QgTUFYX0lOSVRJQUxfU1RBUl9TSVpFID0gTUFYX1NUQVJfU0laRSAvIDI7XG5jb25zdCBCQVNFX1NJWkVfU0NBTEVfRkFDVE9SID0gMC4wMDI7XG5jb25zdCBCQVNFX1NQRUVEX1NDQUxFX0ZBQ1RPUiA9IDAuMDA4O1xuXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnMnKTtcbmNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuZXhwb3J0IGZ1bmN0aW9uIFN0YXIoaW5pdGlhbFgsIGluaXRpYWxZKSB7XG4gICAgY29uc3Qgc2l6ZSA9IE1hdGgucmFuZG9tKCkgKiAoTUFYX0lOSVRJQUxfU1RBUl9TSVpFIC0gTUlOX1NUQVJfU0laRSkgKyBNSU5fU1RBUl9TSVpFO1xuICAgIENhbnZhc09iamVjdC5jYWxsKHRoaXMsIGluaXRpYWxYLCBpbml0aWFsWSwgc2l6ZSwgZmFsc2UpO1xuXG4gICAgdGhpcy5pbml0aWFsWCA9IGluaXRpYWxYO1xuICAgIHRoaXMuaW5pdGlhbFkgPSBpbml0aWFsWTtcbiAgICB0aGlzLnZ4ID0gTWF0aC5taW4oMSwgdGhpcy5zaXplIC8gMikgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSk7XG4gICAgdGhpcy52eSA9IE1hdGgubWluKDEsIHRoaXMuc2l6ZSAvIDIpICogKE1hdGgucmFuZG9tKCkgLSAwLjUpO1xufVxuXG5TdGFyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ2FudmFzT2JqZWN0LnByb3RvdHlwZSk7XG5TdGFyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN0YXI7XG5cblN0YXIucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbiAobW92ZW1lbnRGYWN0b3IgPSAxKSB7XG4gICAgdGhpcy54ICs9IHRoaXMudnggKiBtb3ZlbWVudEZhY3RvcjtcbiAgICB0aGlzLnkgKz0gdGhpcy52eSAqIG1vdmVtZW50RmFjdG9yO1xufTtcblxuU3Rhci5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbiAoc2NhbGVGYWN0b3IgPSAxKSB7XG4gICAgaWYgKHRoaXMuc2l6ZSA8IE1BWF9TVEFSX1NJWkUpIHtcbiAgICAgICAgdGhpcy5zaXplICs9IHRoaXMuc2l6ZSAqIEJBU0VfU0laRV9TQ0FMRV9GQUNUT1IgKiBzY2FsZUZhY3RvcjtcbiAgICB9XG5cbiAgICB0aGlzLnZ4ICs9IHRoaXMudnggKiAgQkFTRV9TUEVFRF9TQ0FMRV9GQUNUT1IgKiBzY2FsZUZhY3RvcjtcbiAgICB0aGlzLnZ5ICs9IHRoaXMudnkgKiBCQVNFX1NQRUVEX1NDQUxFX0ZBQ1RPUiAqIHNjYWxlRmFjdG9yO1xufTtcblxuU3Rhci5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIGNvbnRleHQuZWxsaXBzZSh0aGlzLngsIHRoaXMueSwgdGhpcy5zaXplIC8gMiwgdGhpcy5zaXplIC8gMiwgMCwgMCwgMiAqIE1hdGguUEkpO1xuICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgY29udGV4dC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XG4gICAgY29udGV4dC5maWxsKCk7XG59O1xuIiwiaW1wb3J0IHsgU0hPVF9TUEVFRCB9IGZyb20gXCIuL3NoaXBcIjtcbmltcG9ydCB7IFN0YXIgfSBmcm9tIFwiLi9zdGFyXCI7XG5pbXBvcnQgeyBnZXROZXdTdGFycyB9IGZyb20gXCIuXCI7XG5cbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFycycpO1xuY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG5sZXQgc2NvcmUgPSAwO1xubGV0IGdhbWVPdmVyID0gZmFsc2U7XG5cbmNvbnN0IHNob3dTY29yZSA9ICgpID0+IHtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcbiAgICBjb250ZXh0LnRleHRBbGlnbiA9IFwibGVmdFwiO1xuICAgIGNvbnRleHQuZm9udCA9IFwiMjRweCBtb25vXCI7XG4gICAgY29udGV4dC5maWxsVGV4dChcIlNDT1JFOiBcIiArIHNjb3JlLCAxMCwgMzApO1xufTtcblxuZXhwb3J0IGNvbnN0IGFuaW1hdGVTdGFycyA9IChzdGFycykgPT4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHN0YXIgPSBzdGFyc1tpXTtcblxuICAgICAgICBpZiAoc3Rhci52aXNpYmxlKSB7XG4gICAgICAgICAgICBzdGFyLmRyYXcoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChNYXRoLnJhbmRvbSgpID4gMC4xKSB7XG4gICAgICAgICAgICBzdGFyLnZpc2libGUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgc3Rhci5tb3ZlKCk7XG5cbiAgICAgICAgaWYgKHN0YXIueCA+IGNhbnZhcy53aWR0aCAtIHN0YXIuc2l6ZSB8fCBzdGFyLnggPCBzdGFyLnNpemVcbiAgICAgICAgICAgIHx8IHN0YXIueSA+IGNhbnZhcy5oZWlnaHQgLSBzdGFyLnNpemUgfHwgc3Rhci55IDwgc3Rhci5zaXplKSB7XG4gICAgICAgICAgICBpZiAoc3Rhci55ID4gY2FudmFzLmhlaWdodCAtIHN0YXIuc2l6ZSkge1xuICAgICAgICAgICAgICAgIHNjb3JlKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHN0YXJzW2ldID0gbmV3IFN0YXIoY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDMpO1xuICAgICAgICAgICAgc3RhcnNbaV0ubW92ZShNYXRoLnJhbmRvbSgpICogKGNhbnZhcy53aWR0aC82KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGFyLnNjYWxlKCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5jb25zdCBhbmltYXRlU2hvdCA9IChzaG90KSA9PiB7XG4gICAgc2hvdC55ID0gc2hvdC55IC0gU0hPVF9TUEVFRDtcbiAgICBcbiAgICBpZiAoc2hvdC55ID09PSAwKSB7XG4gICAgICAgIHNob3QuaGl0ID0gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgc2hvdC5kcmF3KCk7XG59O1xuXG5jb25zdCBpc1NoaXBDb2xsaWRpbmcgPSAoc3Rhciwgc2hpcCkgPT4ge1xuICAgIHJldHVybiBzaGlwLnggLSBzdGFyLnggPCBzaGlwLnNpemUgJiYgc2hpcC54IC0gc3Rhci54ID4gLXNoaXAuc2l6ZVxuICAgICAgICAmJiBzaGlwLnkgLSBzdGFyLnkgPCBzaGlwLnNpemUgLyAyICYmIHNoaXAueSAtIHN0YXIueSA+IC1zaGlwLnNpemUgLyAyXG4gICAgICAgICYmIHN0YXIudmlzaWJsZTtcbn07XG5cbmNvbnN0IGlzU2hvdENvbGxpZGluZyA9IChzdGFyLCBzaG90KSA9PiB7XG4gICAgcmV0dXJuIHNob3QueCAtIHN0YXIueCA8IHN0YXIuc2l6ZSAmJiBzaG90LnggLSBzdGFyLnggPiAtc3Rhci5zaXplXG4gICAgICAgICYmIHNob3QueSAtIHN0YXIueSA8IHN0YXIuc2l6ZSAmJiBzaG90LnkgLSBzdGFyLnkgPiAtc3Rhci5zaXplXG4gICAgICAgICYmIHN0YXIudmlzaWJsZTtcbn07XG5cbmNvbnN0IGRyYXdHYW1lT3ZlciA9ICgpID0+IHtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcbiAgICBjb250ZXh0LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgY29udGV4dC5mb250ID0gXCI2MHB4IG1vbm9zcGFjZVwiO1xuICAgIGNvbnRleHQuZmlsbFRleHQoXCJHQU1FIE9WRVJcIiwgY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIpO1xuXG4gICAgY29udGV4dC5mb250ID0gXCIzOHB4IG1vbm9zcGFjZVwiO1xuICAgIGNvbnRleHQuZmlsbFRleHQoXCJUYXAgdG8gcmVzdGFydFwiLCBjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMiArIDgwKTtcbn07XG5cbmNvbnN0IHRvZ2dsZU9iamVjdHNWaXNpYmlsaXR5ID0gKHN0YXJzLCBzaGlwKSA9PiB7XG4gICAgc2hpcC52aXNpYmxlID0gIWdhbWVPdmVyO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5zaG90cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzaGlwLnNob3RzW2ldLmhpdCA9IGdhbWVPdmVyO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc3RhcnNbaV0udmlzaWJsZSA9ICFnYW1lT3ZlcjtcbiAgICB9XG59O1xuXG5jb25zdCBlbmRHYW1lID0gKHN0YXJzLCBzaGlwKSA9PiB7XG4gICAgZ2FtZU92ZXIgPSB0cnVlO1xuXG4gICAgdG9nZ2xlT2JqZWN0c1Zpc2liaWxpdHkoc3RhcnMsIHNoaXApO1xuXG4gICAgZHJhd0dhbWVPdmVyKCk7XG5cbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgXCJwb2ludGVydXBcIixcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgZ2FtZU92ZXIgPSBmYWxzZTtcblxuICAgICAgICAgICAgdG9nZ2xlT2JqZWN0c1Zpc2liaWxpdHkoc3RhcnMsIHNoaXApO1xuXG4gICAgICAgICAgICBzdGFycyA9IGdldE5ld1N0YXJzKCk7XG4gICAgICAgICAgICBzaGlwLnJlc2V0U2l6ZSgpO1xuICAgICAgICAgICAgc2hpcC5zZXRQb3NpdGlvbihjYW52YXMud2lkdGggLyAyLCAoY2FudmFzLmhlaWdodCAvIDYpICogNSk7XG5cbiAgICAgICAgICAgIGFuaW1hdGUoc2hpcCwgc3RhcnMpO1xuICAgICAgICB9LFxuICAgICAgICB7IG9uY2U6IHRydWUgfVxuICAgICk7XG59O1xuXG5jb25zdCBjaGVja1NoaXBDb2xsaXNpb25zID0gKHN0YXJzLCBzaGlwKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGFycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzdGFyID0gc3RhcnNbaV07XG4gICAgICAgIGlmIChpc1NoaXBDb2xsaWRpbmcoc3Rhciwgc2hpcCkpIHtcbiAgICAgICAgICAgIHNoaXAudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgZW5kR2FtZShzdGFycywgc2hpcCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5jb25zdCBjaGVja1Nob3RzQ29sbGlzaW9ucyA9IChzdGFycywgc2hvdHMpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBzdGFyID0gc3RhcnNbaV07XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2hvdHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHNob3QgPSBzaG90c1tqXTtcbiAgICAgICAgICAgIGlmIChpc1Nob3RDb2xsaWRpbmcoc3Rhciwgc2hvdCkpIHtcbiAgICAgICAgICAgICAgICBzaG90LmhpdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc3RhcnNbaV0gPSBuZXcgU3RhcihjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMyk7XG4gICAgICAgICAgICAgICAgc3RhcnNbaV0ubW92ZShNYXRoLnJhbmRvbSgpICogKGNhbnZhcy53aWR0aC82KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5jb25zdCBjaGVja0NvbGxpc2lvbnMgPSAoc3RhcnMsIHNoaXApID0+IHtcbiAgICBjaGVja1NoaXBDb2xsaXNpb25zKHN0YXJzLCBzaGlwKTtcblxuICAgIGNoZWNrU2hvdHNDb2xsaXNpb25zKHN0YXJzLCBzaGlwLnNob3RzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBhbmltYXRlID0gKHNoaXAsIHN0YXJzKSA9PiB7XG4gICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuICAgIHNob3dTY29yZSgpO1xuXG4gICAgYW5pbWF0ZVN0YXJzKHN0YXJzKTtcblxuICAgIGlmIChzaGlwLnZpc2libGUpIHtcbiAgICAgICAgc2hpcC5kcmF3KCk7XG4gICAgfVxuXG4gICAgc2hpcC5zaG90cyA9IHNoaXAuc2hvdHMuZmlsdGVyKChzaG90KSA9PiB7XG4gICAgICAgIGFuaW1hdGVTaG90KHNob3QpO1xuXG4gICAgICAgIHJldHVybiAhc2hvdC5oaXQ7XG4gICAgfSk7XG5cbiAgICBjaGVja0NvbGxpc2lvbnMoc3RhcnMsIHNoaXApO1xuICAgIFxuICAgIGlmICghZ2FtZU92ZXIpIHtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBhbmltYXRlKHNoaXAsIHN0YXJzKSk7XG4gICAgfVxufTtcbiIsImltcG9ydCB7IFNoaXAsIFNISVBfSE9SSVpPTlRBTF9TUEVFRCwgU0hJUF9WRVJUSUNBTF9TUEVFRCB9IGZyb20gXCIuL3NoaXBcIjtcbmltcG9ydCB7IFN0YXIgfSBmcm9tIFwiLi9zdGFyXCI7XG5pbXBvcnQgeyBhbmltYXRlIH0gZnJvbSBcIi4vbG9vcFwiO1xuaW1wb3J0IHsgZGV2aWNlSGFzVG91Y2hTY3JlZW4gfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5jb25zdCBNQVhfU1RBUlMgPSAyMDA7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROZXdTdGFycygpIHtcbiAgICBjb25zdCBzdGFycyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTUFYX1NUQVJTOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc3RhciA9IG5ldyBTdGFyKGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAzKTtcblxuICAgICAgICBzdGFyLm1vdmUoTWF0aC5yYW5kb20oKSAqIChjYW52YXMud2lkdGgvMykpO1xuXG4gICAgICAgIHN0YXJzLnB1c2goc3Rhcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0YXJzO1xufVxuXG5jb25zdCBiaW5kS2V5cyA9IChzaGlwKSA9PiB7XG4gICAgd2luZG93Lm9ua2V5ZG93biA9IChlKSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd0xlZnRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJLZXlBXCI6XG4gICAgICAgICAgICAgICAgc2hpcC5tb3ZlSG9yaXpvbnRhbGx5KC1TSElQX0hPUklaT05UQUxfU1BFRUQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJLZXlEXCI6XG4gICAgICAgICAgICAgICAgc2hpcC5tb3ZlSG9yaXpvbnRhbGx5KFNISVBfSE9SSVpPTlRBTF9TUEVFRCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dVcFwiOlxuICAgICAgICAgICAgY2FzZSBcIktleVdcIjpcbiAgICAgICAgICAgICAgICBzaGlwLm1vdmVWZXJ0aWNhbGx5KC1TSElQX1ZFUlRJQ0FMX1NQRUVEKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcbiAgICAgICAgICAgIGNhc2UgXCJLZXlTXCI6XG4gICAgICAgICAgICAgICAgc2hpcC5tb3ZlVmVydGljYWxseShTSElQX1ZFUlRJQ0FMX1NQRUVEKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJLZXlaXCI6XG4gICAgICAgICAgICAgICAgc2hpcC5maXJlU2hvdCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoIWRldmljZUhhc1RvdWNoU2NyZWVuKCkpIHtcbiAgICAgICAgd2luZG93Lm9ud2hlZWwgPSAoZSkgPT4ge1xuICAgICAgICAgICAgc2hpcC5tb3ZlSG9yaXpvbnRhbGx5KGUuZGVsdGFYKTtcbiAgICAgICAgICAgIHNoaXAubW92ZVZlcnRpY2FsbHkoZS5kZWx0YVkpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHdpbmRvdy5vbmNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgc2hpcC5maXJlU2hvdChlLmNsaWVudFgsIGUuY2xpZW50WSk7XG4gICAgfTtcbn07XG5cbmNvbnN0IGxpc3RlblRvT3JpZW50YXRpb25DaGFuZ2UgPSAoc2hpcCkgPT4ge1xuICAgIGNvbnN0IGNsYW1wID0gKHZhbHVlLCBtaW4sIG1heCkgPT4ge1xuICAgICAgICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodmFsdWUsIG1pbiksIG1heCk7XG4gICAgfTtcblxuICAgIGxldCBpbml0aWFsQmV0YSA9IDA7XG4gICAgbGV0IGluaXRpYWxHYW1tYSA9IDA7XG5cbiAgICBjb25zdCBpbml0aWFsTGlzdGVuZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaW5pdGlhbEJldGEgPSBjbGFtcChldmVudC5iZXRhLCAtOTAsIDkwKTtcbiAgICAgICAgaW5pdGlhbEdhbW1hID0gZXZlbnQuZ2FtbWE7XG4gICAgfTtcblxuICAgIGNvbnN0IG9yaWVudGF0aW9uTGlzdGVuZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgYmV0YSA9IGNsYW1wKGV2ZW50LmJldGEgLSBpbml0aWFsQmV0YSwgLTkwLCA5MCk7XG4gICAgICAgIGNvbnN0IGdhbW1hID0gZXZlbnQuZ2FtbWEgLSBpbml0aWFsR2FtbWE7XG5cbiAgICAgICAgc2hpcC5tb3ZlSG9yaXpvbnRhbGx5KGdhbW1hIC8gMjApO1xuICAgICAgICBzaGlwLm1vdmVWZXJ0aWNhbGx5KGJldGEgLyAxMCk7XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlb3JpZW50YXRpb25cIiwgaW5pdGlhbExpc3RlbmVyLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VvcmllbnRhdGlvblwiLCBvcmllbnRhdGlvbkxpc3RlbmVyKTtcbn07XG5cbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFycycpO1xuXG5jYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbmNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cbmNvbnN0IHN0YXJzID0gZ2V0TmV3U3RhcnMoKTtcblxuY29uc3Qgc2hpcCA9IG5ldyBTaGlwKGNhbnZhcy53aWR0aCAvIDIsIChjYW52YXMuaGVpZ2h0IC8gNikgKiA1KTtcblxuYmluZEtleXMoc2hpcCk7XG5cbmxpc3RlblRvT3JpZW50YXRpb25DaGFuZ2Uoc2hpcCwgc3RhcnMpO1xuXG53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IGFuaW1hdGUoc2hpcCwgc3RhcnMpKTtcbiIsImV4cG9ydCBmdW5jdGlvbiBkZXZpY2VIYXNUb3VjaFNjcmVlbigpIHtcbiAgICBsZXQgaGFzVG91Y2hTY3JlZW4gPSBmYWxzZTtcblxuICAgIGlmIChcIm1heFRvdWNoUG9pbnRzXCIgaW4gbmF2aWdhdG9yKSB7XG4gICAgICAgIGhhc1RvdWNoU2NyZWVuID0gbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMDtcbiAgICB9XG4gICAgZWxzZSBpZiAoXCJtc01heFRvdWNoUG9pbnRzXCIgaW4gbmF2aWdhdG9yKSB7XG4gICAgICAgIGhhc1RvdWNoU2NyZWVuID0gbmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMgPiAwO1xuICAgIH1cblxuICAgIHJldHVybiBoYXNUb3VjaFNjcmVlbjtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=