!function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";function o(t,e,i,o){this.x=t,this.y=e,this.size=i,this.visible=o}i.r(e),i.d(e,"getNewStars",(function(){return x}));const n=document.getElementById("stars"),s=n.getContext("2d");function r(t,e){o.call(this,t,e,30,!0),this.shots=[]}r.prototype=Object.create(o.prototype),r.prototype.constructor=r;const h=t=>.02*(n.width/2-t);function a(t,e,i,n){o.call(this,t,e,4,null),this.targetX=i,this.targetY=n,this.hit=!1}r.prototype.setPosition=function(t,e){this.x=t,this.y=e},r.prototype.resetSize=function(){this.size=30},r.prototype.getNoseXCoordinate=function(){return this.x},r.prototype.getNoseYCoordinate=function(){return this.y-this.size/2},r.prototype.getLeftWingXCoordinate=function(){return this.x-this.size-h(this.x)},r.prototype.getRightWingXCoordinate=function(){return this.x+this.size-h(this.x)},r.prototype.getWingsYCoordinate=function(){return this.y+this.size/4},r.prototype.getTopXCoordinate=function(){return this.x-h(this.x)},r.prototype.getTopYCoordinate=function(){return this.y-this.size/8},r.prototype.getRearXCoordinate=function(){return this.x-h(this.x)},r.prototype.getRearYCoordinate=function(){return this.y+this.size/3},r.prototype.moveVertically=function(t){const e=n.width/2-this.x,i=n.height/2-this.y,o=Math.atan2(i,e);this.x-=t*Math.cos(o),this.y>n.height/2&&(this.y-=t*Math.sin(o),this.size+=t/20)},r.prototype.moveHorizontally=function(t){this.x+=t},r.prototype.draw=function(){s.beginPath(),s.moveTo(this.getLeftWingXCoordinate(),this.getWingsYCoordinate()),s.lineTo(this.getNoseXCoordinate(),this.getNoseYCoordinate()),s.lineTo(this.getRightWingXCoordinate(),this.getWingsYCoordinate()),s.lineTo(this.getRearXCoordinate(),this.getRearYCoordinate()),s.lineTo(this.getLeftWingXCoordinate(),this.getWingsYCoordinate()),s.moveTo(this.getTopXCoordinate(),this.getTopYCoordinate()),s.lineTo(this.getLeftWingXCoordinate(),this.getWingsYCoordinate()),s.moveTo(this.getTopXCoordinate(),this.getTopYCoordinate()),s.lineTo(this.getRightWingXCoordinate(),this.getWingsYCoordinate()),s.moveTo(this.getTopXCoordinate(),this.getTopYCoordinate()),s.lineTo(this.getNoseXCoordinate(),this.getNoseYCoordinate()),s.closePath(),s.strokeStyle="white",s.lineWidth=1.5,s.stroke()},r.prototype.fireShot=function(t,e){this.shots.push(new a(this.getNoseXCoordinate(),this.getNoseYCoordinate(),t,e))},a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.prototype.draw=function(){s.beginPath(),s.ellipse(this.x,this.y,this.size/2,this.size/2,0,0,2*Math.PI),s.closePath(),s.fillStyle="grey",s.fill()};const l=document.getElementById("stars").getContext("2d");function c(t,e){const i=3.3*Math.random()+.2;o.call(this,t,e,i,!1),this.initialX=t,this.initialY=e,this.vx=Math.min(1,this.size/2)*(Math.random()-.5),this.vy=Math.min(1,this.size/2)*(Math.random()-.5)}c.prototype=Object.create(o.prototype),c.prototype.constructor=c,c.prototype.move=function(t=1){this.x+=this.vx*t,this.y+=this.vy*t},c.prototype.scale=function(t=1){this.size<7&&(this.size+=.002*this.size*t),this.vx+=.008*this.vx*t,this.vy+=.008*this.vy*t},c.prototype.draw=function(){l.beginPath(),l.ellipse(this.x,this.y,this.size/2,this.size/2,0,0,2*Math.PI),l.closePath(),l.fillStyle="white",l.fill()};const d=document.getElementById("stars"),g=d.getContext("2d");let y=0,p=!1;const u=(t,e)=>e.x-t.x<e.size&&e.x-t.x>-e.size&&e.y-t.y<e.size/2&&e.y-t.y>-e.size/2&&!0===t.visible,f=(t,e)=>{e.visible=!p;for(let t=0;t<e.shots.length;t++)e.shots[t].hit=p;for(let e=0;e<t.length;e++)t[e].visible=!p},m=(t,e)=>{p=!0,f(t,e),g.fillStyle="white",g.textAlign="center",g.font="60px monospace",g.fillText("GAME OVER",d.width/2,d.height/2),g.font="38px monospace",g.fillText("Tap to restart",d.width/2,d.height/2+80),d.addEventListener("pointerup",()=>{p=!1,f(t,e),t=x(),e.resetSize(),e.setPosition(d.width/2,d.height/6*5),v(e,t)},{once:!0})},w=(t,e)=>{((t,e)=>{for(let i=0;i<t.length;i++){const o=t[i];u(o,e)&&(e.visible=!1,m(t,e))}})(t,e),((t,e)=>{for(let i=0;i<t.length;i++){let o=t[i];for(let n=0;n<e.length;n++){const s=e[n];s.x-o.x<o.size&&s.x-o.x>-o.size&&s.y-o.y<o.size&&s.y-o.y>-o.size&&!0===o.visible&&(s.hit=!0,t[i]=new c(d.width/2,d.height/3),t[i].move(Math.random()*(d.width/6)))}}})(t,e.shots)},v=(t,e)=>{g.clearRect(0,0,d.width,d.height),g.fillStyle="white",g.textAlign="left",g.font="24px mono",g.fillText("SCORE: "+y,10,30),(t=>{for(let e=0;e<t.length;e++){let i=t[e];i.visible?i.draw():Math.random()>.1&&(i.visible=!0),i.move(),i.x>d.width-i.size||i.x<i.size||i.y>d.height-i.size||i.y<i.size?(i.y>d.height-i.size&&y++,t[e]=new c(d.width/2,d.height/3),t[e].move(Math.random()*(d.width/6))):i.scale()}})(e),t.visible&&t.draw(),t.shots=t.shots.filter(t=>((t=>{t.y=t.y-4,0===t.y&&(t.hit=!0),t.draw()})(t),!t.hit)),w(e,t),p||window.requestAnimationFrame(()=>v(t,e))};function x(){const t=[];for(let e=0;e<200;e++){const e=new c(z.width/2,z.height/3);e.move(Math.random()*(z.width/3)),t.push(e)}return t}const z=document.getElementById("stars");z.width=window.innerWidth,z.height=window.innerHeight;const C=x(),b=new r(z.width/2,z.height/6*5);var T;T=b,window.onkeydown=t=>{switch(t.key){case"ArrowLeft":case"KeyA":T.moveHorizontally(-1);break;case"ArrowRight":case"KeyD":T.moveHorizontally(1);break;case"ArrowUp":case"KeyW":T.moveVertically(-.4);break;case"ArrowDown":case"KeyS":T.moveVertically(.4);break;case"KeyZ":T.fireShot()}},function(){let t=!1;return"maxTouchPoints"in navigator?t=navigator.maxTouchPoints>0:"msMaxTouchPoints"in navigator&&(t=navigator.msMaxTouchPoints>0),t}()||(window.onwheel=t=>{T.moveHorizontally(t.deltaX),T.moveVertically(t.deltaY)}),window.onclick=t=>{T.fireShot(t.clientX,t.clientY)},((t,e)=>{const i=(t,e,i)=>Math.min(Math.max(t,e),i);let o=0,n=0;window.addEventListener("deviceorientation",t=>{o=i(t.beta,-90,90),n=t.gamma},{once:!0}),window.addEventListener("deviceorientation",s=>{const r=i(s.beta-o,-90,90),h=s.gamma-n;t.moveHorizontally(h/40),t.moveVertically(r/20);for(let t=0;t<e.length;t++)e[t].x-=h/5,e[t].y+=r/5})})(b,C),window.requestAnimationFrame(()=>v(b,C))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbnZhcy1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoaXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xvb3AuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy91dGlscy5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkNhbnZhc09iamVjdCIsImluaXRpYWxYIiwiaW5pdGlhbFkiLCJzaXplIiwidmlzaWJsZSIsInRoaXMiLCJ4IiwieSIsImNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsIlNoaXAiLCJzaG90cyIsImNvbnN0cnVjdG9yIiwiZ2V0U2hpcEhvcml6b250YWxTa2V3Iiwic2hpcFgiLCJ3aWR0aCIsIlNob3QiLCJvcmlnaW5YIiwib3JpZ2luWSIsInRhcmdldFgiLCJ0YXJnZXRZIiwiaGl0Iiwic2V0UG9zaXRpb24iLCJyZXNldFNpemUiLCJnZXROb3NlWENvb3JkaW5hdGUiLCJnZXROb3NlWUNvb3JkaW5hdGUiLCJnZXRMZWZ0V2luZ1hDb29yZGluYXRlIiwiZ2V0UmlnaHRXaW5nWENvb3JkaW5hdGUiLCJnZXRXaW5nc1lDb29yZGluYXRlIiwiZ2V0VG9wWENvb3JkaW5hdGUiLCJnZXRUb3BZQ29vcmRpbmF0ZSIsImdldFJlYXJYQ29vcmRpbmF0ZSIsImdldFJlYXJZQ29vcmRpbmF0ZSIsIm1vdmVWZXJ0aWNhbGx5Iiwic3BlZWQiLCJkZWx0YVgiLCJkZWx0YVkiLCJoZWlnaHQiLCJkaXJlY3Rpb24iLCJNYXRoIiwiYXRhbjIiLCJjb3MiLCJzaW4iLCJtb3ZlSG9yaXpvbnRhbGx5IiwiZHJhdyIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsImNsb3NlUGF0aCIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwic3Ryb2tlIiwiZmlyZVNob3QiLCJwdXNoIiwiZWxsaXBzZSIsIlBJIiwiZmlsbFN0eWxlIiwiZmlsbCIsIlN0YXIiLCJyYW5kb20iLCJ2eCIsIm1pbiIsInZ5IiwibW92ZSIsIm1vdmVtZW50RmFjdG9yIiwic2NhbGUiLCJzY2FsZUZhY3RvciIsInNjb3JlIiwiZ2FtZU92ZXIiLCJpc1NoaXBDb2xsaWRpbmciLCJzdGFyIiwic2hpcCIsInRvZ2dsZU9iamVjdHNWaXNpYmlsaXR5Iiwic3RhcnMiLCJsZW5ndGgiLCJlbmRHYW1lIiwidGV4dEFsaWduIiwiZm9udCIsImZpbGxUZXh0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImdldE5ld1N0YXJzIiwiYW5pbWF0ZSIsIm9uY2UiLCJjaGVja0NvbGxpc2lvbnMiLCJjaGVja1NoaXBDb2xsaXNpb25zIiwiaiIsInNob3QiLCJjaGVja1Nob3RzQ29sbGlzaW9ucyIsImNsZWFyUmVjdCIsImFuaW1hdGVTdGFycyIsImZpbHRlciIsImFuaW1hdGVTaG90Iiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0Iiwib25rZXlkb3duIiwiZSIsImhhc1RvdWNoU2NyZWVuIiwibmF2aWdhdG9yIiwibWF4VG91Y2hQb2ludHMiLCJtc01heFRvdWNoUG9pbnRzIiwiZGV2aWNlSGFzVG91Y2hTY3JlZW4iLCJvbndoZWVsIiwib25jbGljayIsImNsaWVudFgiLCJjbGllbnRZIiwiY2xhbXAiLCJtYXgiLCJpbml0aWFsQmV0YSIsImluaXRpYWxHYW1tYSIsImV2ZW50IiwiYmV0YSIsImdhbW1hIiwibGlzdGVuVG9PcmllbnRhdGlvbkNoYW5nZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkEx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M0JELEVBQWlCQyxVQUFVRSxpQkFBbUIsR0FHM0NILEVEcUNGSSxLQUNEVixPQUFPVyxRQUFXTixJQUNkMUIsRUFBSzVCLGlCQUFpQnNELEVBQUU5RCxRQUN4Qm9DLEVBQUt0QyxlQUFlZ0UsRUFBRTdELFVBSTlCd0QsT0FBT1ksUUFBV1AsSUFDZDFCLEVBQUtuQixTQUFTNkMsRUFBRVEsUUFBU1IsRUFBRVMsVUFJRCxFQUFDbkMsRUFBTUUsS0FDckMsTUFBTWtDLEVBQVEsQ0FBQzdILEVBQU8rRSxFQUFLK0MsSUFDaEJyRSxLQUFLc0IsSUFBSXRCLEtBQUtxRSxJQUFJOUgsRUFBTytFLEdBQU0rQyxHQUcxQyxJQUFJQyxFQUFjLEVBQ2RDLEVBQWUsRUFvQm5CbEIsT0FBT2IsaUJBQWlCLG9CQWxCQ2dDLElBQ3JCRixFQUFjRixFQUFNSSxFQUFNQyxNQUFPLEdBQUksSUFDckNGLEVBQWVDLEVBQU1FLE9BZ0JxQyxDQUFFL0IsTUFBTSxJQUN0RVUsT0FBT2IsaUJBQWlCLG9CQWRLZ0MsSUFDekIsTUFBTUMsRUFBT0wsRUFBTUksRUFBTUMsS0FBT0gsR0FBYyxHQUFJLElBQzVDSSxFQUFRRixFQUFNRSxNQUFRSCxFQUU1QnZDLEVBQUs1QixpQkFBaUJzRSxFQUFRLElBQzlCMUMsRUFBS3RDLGVBQWUrRSxFQUFPLElBRTNCLElBQUssSUFBSW5KLEVBQUksRUFBR0EsRUFBSTRHLEVBQU1DLE9BQVE3RyxJQUM5QjRHLEVBQU01RyxHQUFHc0MsR0FBSzhHLEVBQVEsRUFDdEJ4QyxFQUFNNUcsR0FBR3VDLEdBQUs0RyxFQUFPLEtBbUJqQ0UsQ0FBMEIsRUFBTSxHQUVoQ3RCLE9BQU9DLHNCQUFzQixJQUFNWixFQUFRLEVBQU0iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBmdW5jdGlvbiBDYW52YXNPYmplY3QoaW5pdGlhbFgsIGluaXRpYWxZLCBzaXplLCB2aXNpYmxlKSB7XG4gICAgdGhpcy54ID0gaW5pdGlhbFg7XG4gICAgdGhpcy55ID0gaW5pdGlhbFk7XG4gICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlO1xufVxuIiwiaW1wb3J0IHsgQ2FudmFzT2JqZWN0IH0gZnJvbSBcIi4vY2FudmFzLW9iamVjdFwiO1xuXG5jb25zdCBTSElQX1NJWkUgPSAzMDtcbmNvbnN0IFNISVBfU0NBTEUgPSAyMDtcbmNvbnN0IFNISVBfTElORV9XSURUSCA9IDEuNTtcbmNvbnN0IFNISVBfU0tFV19GQUNUT1IgPSAwLjAyO1xuZXhwb3J0IGNvbnN0IFNISVBfSE9SSVpPTlRBTF9TUEVFRCA9IDE7XG5leHBvcnQgY29uc3QgU0hJUF9WRVJUSUNBTF9TUEVFRCA9IDAuNDtcblxuY29uc3QgU0hPVF9TSVpFID0gNDtcbmV4cG9ydCBjb25zdCBTSE9UX1NQRUVEID0gNDtcblxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJzJyk7XG5jb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbmV4cG9ydCBmdW5jdGlvbiBTaGlwKGluaXRpYWxYLCBpbml0aWFsWSkge1xuICAgIENhbnZhc09iamVjdC5jYWxsKHRoaXMsIGluaXRpYWxYLCBpbml0aWFsWSwgU0hJUF9TSVpFLCB0cnVlKTtcblxuICAgIHRoaXMuc2hvdHMgPSBbXTtcbn1cblxuU2hpcC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENhbnZhc09iamVjdC5wcm90b3R5cGUpO1xuU2hpcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTaGlwO1xuXG5jb25zdCBnZXRTaGlwSG9yaXpvbnRhbFNrZXcgPSAoc2hpcFgpID0+ICgoY2FudmFzLndpZHRoIC8gMikgLSBzaGlwWCkgKiBTSElQX1NLRVdfRkFDVE9SO1xuXG5TaGlwLnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xufTtcblxuU2hpcC5wcm90b3R5cGUucmVzZXRTaXplID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc2l6ZSA9IFNISVBfU0laRTtcbn07XG5cblNoaXAucHJvdG90eXBlLmdldE5vc2VYQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy54O1xufTtcblxuU2hpcC5wcm90b3R5cGUuZ2V0Tm9zZVlDb29yZGluYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnkgLSB0aGlzLnNpemUgLyAyO1xufTtcblxuU2hpcC5wcm90b3R5cGUuZ2V0TGVmdFdpbmdYQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy54IC0gdGhpcy5zaXplIC0gZ2V0U2hpcEhvcml6b250YWxTa2V3KHRoaXMueCk7XG59O1xuXG5TaGlwLnByb3RvdHlwZS5nZXRSaWdodFdpbmdYQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy54ICsgdGhpcy5zaXplIC0gZ2V0U2hpcEhvcml6b250YWxTa2V3KHRoaXMueCk7XG59O1xuXG5TaGlwLnByb3RvdHlwZS5nZXRXaW5nc1lDb29yZGluYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnkgKyB0aGlzLnNpemUgLyA0O1xufTtcblxuU2hpcC5wcm90b3R5cGUuZ2V0VG9wWENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMueCAtIGdldFNoaXBIb3Jpem9udGFsU2tldyh0aGlzLngpO1xufTtcblxuU2hpcC5wcm90b3R5cGUuZ2V0VG9wWUNvb3JkaW5hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMueSAtIHRoaXMuc2l6ZSAvIDg7XG59O1xuXG5TaGlwLnByb3RvdHlwZS5nZXRSZWFyWENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMueCAtIGdldFNoaXBIb3Jpem9udGFsU2tldyh0aGlzLngpO1xufTtcblxuU2hpcC5wcm90b3R5cGUuZ2V0UmVhcllDb29yZGluYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnkgKyB0aGlzLnNpemUgLyAzO1xufTtcblxuU2hpcC5wcm90b3R5cGUubW92ZVZlcnRpY2FsbHkgPSBmdW5jdGlvbiAoc3BlZWQpIHtcbiAgICBjb25zdCBkZWx0YVggPSBjYW52YXMud2lkdGgvMiAtIHRoaXMueDtcbiAgICBjb25zdCBkZWx0YVkgPSBjYW52YXMuaGVpZ2h0LzIgLSB0aGlzLnk7XG4gICAgY29uc3QgZGlyZWN0aW9uID0gTWF0aC5hdGFuMihkZWx0YVksIGRlbHRhWCk7XG4gICAgdGhpcy54IC09IHNwZWVkICogTWF0aC5jb3MoZGlyZWN0aW9uKTtcblxuICAgIGlmICh0aGlzLnkgPiBjYW52YXMuaGVpZ2h0LzIpIHtcbiAgICAgICAgdGhpcy55IC09IHNwZWVkICogTWF0aC5zaW4oZGlyZWN0aW9uKTtcbiAgICAgICAgdGhpcy5zaXplICs9IHNwZWVkIC8gU0hJUF9TQ0FMRTtcbiAgICB9XG59O1xuXG5TaGlwLnByb3RvdHlwZS5tb3ZlSG9yaXpvbnRhbGx5ID0gZnVuY3Rpb24gKHNwZWVkKSB7XG4gICAgdGhpcy54ICs9IHNwZWVkO1xufTtcblxuU2hpcC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuXG4gICAgY29udGV4dC5tb3ZlVG8odGhpcy5nZXRMZWZ0V2luZ1hDb29yZGluYXRlKCksIHRoaXMuZ2V0V2luZ3NZQ29vcmRpbmF0ZSgpKTtcbiAgICBjb250ZXh0LmxpbmVUbyh0aGlzLmdldE5vc2VYQ29vcmRpbmF0ZSgpLCB0aGlzLmdldE5vc2VZQ29vcmRpbmF0ZSgpKTtcbiAgICBjb250ZXh0LmxpbmVUbyh0aGlzLmdldFJpZ2h0V2luZ1hDb29yZGluYXRlKCksIHRoaXMuZ2V0V2luZ3NZQ29vcmRpbmF0ZSgpKTtcbiAgICBjb250ZXh0LmxpbmVUbyh0aGlzLmdldFJlYXJYQ29vcmRpbmF0ZSgpLCB0aGlzLmdldFJlYXJZQ29vcmRpbmF0ZSgpKTtcbiAgICBjb250ZXh0LmxpbmVUbyh0aGlzLmdldExlZnRXaW5nWENvb3JkaW5hdGUoKSwgdGhpcy5nZXRXaW5nc1lDb29yZGluYXRlKCkpO1xuXG4gICAgY29udGV4dC5tb3ZlVG8odGhpcy5nZXRUb3BYQ29vcmRpbmF0ZSgpLCB0aGlzLmdldFRvcFlDb29yZGluYXRlKCkpO1xuICAgIGNvbnRleHQubGluZVRvKHRoaXMuZ2V0TGVmdFdpbmdYQ29vcmRpbmF0ZSgpLCB0aGlzLmdldFdpbmdzWUNvb3JkaW5hdGUoKSk7XG5cbiAgICBjb250ZXh0Lm1vdmVUbyh0aGlzLmdldFRvcFhDb29yZGluYXRlKCksIHRoaXMuZ2V0VG9wWUNvb3JkaW5hdGUoKSk7XG4gICAgY29udGV4dC5saW5lVG8odGhpcy5nZXRSaWdodFdpbmdYQ29vcmRpbmF0ZSgpLCB0aGlzLmdldFdpbmdzWUNvb3JkaW5hdGUoKSk7XG5cbiAgICBjb250ZXh0Lm1vdmVUbyh0aGlzLmdldFRvcFhDb29yZGluYXRlKCksIHRoaXMuZ2V0VG9wWUNvb3JkaW5hdGUoKSk7XG4gICAgY29udGV4dC5saW5lVG8odGhpcy5nZXROb3NlWENvb3JkaW5hdGUoKSwgdGhpcy5nZXROb3NlWUNvb3JkaW5hdGUoKSk7XG5cbiAgICBjb250ZXh0IC5jbG9zZVBhdGgoKTtcbiAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gXCJ3aGl0ZVwiO1xuICAgIGNvbnRleHQubGluZVdpZHRoID0gU0hJUF9MSU5FX1dJRFRIO1xuICAgIGNvbnRleHQuc3Ryb2tlKCk7XG59O1xuXG5TaGlwLnByb3RvdHlwZS5maXJlU2hvdCA9IGZ1bmN0aW9uICh0YXJnZXRYLCB0YXJnZXRZKSB7XG4gICAgdGhpcy5zaG90cy5wdXNoKG5ldyBTaG90KHRoaXMuZ2V0Tm9zZVhDb29yZGluYXRlKCksIHRoaXMuZ2V0Tm9zZVlDb29yZGluYXRlKCksIHRhcmdldFgsIHRhcmdldFkpKTtcbn07XG5cbmZ1bmN0aW9uIFNob3Qob3JpZ2luWCwgb3JpZ2luWSwgdGFyZ2V0WCwgdGFyZ2V0WSkge1xuICAgIENhbnZhc09iamVjdC5jYWxsKHRoaXMsIG9yaWdpblgsIG9yaWdpblksIFNIT1RfU0laRSwgbnVsbCk7XG5cbiAgICB0aGlzLnRhcmdldFggPSB0YXJnZXRYO1xuICAgIHRoaXMudGFyZ2V0WSA9IHRhcmdldFk7XG4gICAgdGhpcy5oaXQgPSBmYWxzZTtcbn1cblxuU2hvdC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENhbnZhc09iamVjdC5wcm90b3R5cGUpO1xuU2hvdC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTaG90O1xuXG5TaG90LnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgY29udGV4dC5lbGxpcHNlKHRoaXMueCwgdGhpcy55LCB0aGlzLnNpemUgLyAyLCB0aGlzLnNpemUgLyAyLCAwLCAwLCAyICogTWF0aC5QSSk7XG4gICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IFwiZ3JleVwiO1xuICAgIGNvbnRleHQuZmlsbCgpO1xufTtcbiIsImltcG9ydCB7IENhbnZhc09iamVjdCB9IGZyb20gXCIuL2NhbnZhcy1vYmplY3RcIjtcblxuZXhwb3J0IGNvbnN0IE1JTl9TVEFSX1NJWkUgPSAwLjI7XG5leHBvcnQgY29uc3QgTUFYX1NUQVJfU0laRSA9IDc7XG5jb25zdCBNQVhfSU5JVElBTF9TVEFSX1NJWkUgPSBNQVhfU1RBUl9TSVpFIC8gMjtcbmNvbnN0IEJBU0VfU0laRV9TQ0FMRV9GQUNUT1IgPSAwLjAwMjtcbmNvbnN0IEJBU0VfU1BFRURfU0NBTEVfRkFDVE9SID0gMC4wMDg7XG5cbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFycycpO1xuY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG5leHBvcnQgZnVuY3Rpb24gU3Rhcihpbml0aWFsWCwgaW5pdGlhbFkpIHtcbiAgICBjb25zdCBzaXplID0gTWF0aC5yYW5kb20oKSAqIChNQVhfSU5JVElBTF9TVEFSX1NJWkUgLSBNSU5fU1RBUl9TSVpFKSArIE1JTl9TVEFSX1NJWkU7XG4gICAgQ2FudmFzT2JqZWN0LmNhbGwodGhpcywgaW5pdGlhbFgsIGluaXRpYWxZLCBzaXplLCBmYWxzZSk7XG5cbiAgICB0aGlzLmluaXRpYWxYID0gaW5pdGlhbFg7XG4gICAgdGhpcy5pbml0aWFsWSA9IGluaXRpYWxZO1xuICAgIHRoaXMudnggPSBNYXRoLm1pbigxLCB0aGlzLnNpemUgLyAyKSAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTtcbiAgICB0aGlzLnZ5ID0gTWF0aC5taW4oMSwgdGhpcy5zaXplIC8gMikgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSk7XG59XG5cblN0YXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDYW52YXNPYmplY3QucHJvdG90eXBlKTtcblN0YXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3RhcjtcblxuU3Rhci5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uIChtb3ZlbWVudEZhY3RvciA9IDEpIHtcbiAgICB0aGlzLnggKz0gdGhpcy52eCAqIG1vdmVtZW50RmFjdG9yO1xuICAgIHRoaXMueSArPSB0aGlzLnZ5ICogbW92ZW1lbnRGYWN0b3I7XG59O1xuXG5TdGFyLnByb3RvdHlwZS5zY2FsZSA9IGZ1bmN0aW9uIChzY2FsZUZhY3RvciA9IDEpIHtcbiAgICBpZiAodGhpcy5zaXplIDwgTUFYX1NUQVJfU0laRSkge1xuICAgICAgICB0aGlzLnNpemUgKz0gdGhpcy5zaXplICogQkFTRV9TSVpFX1NDQUxFX0ZBQ1RPUiAqIHNjYWxlRmFjdG9yO1xuICAgIH1cblxuICAgIHRoaXMudnggKz0gdGhpcy52eCAqICBCQVNFX1NQRUVEX1NDQUxFX0ZBQ1RPUiAqIHNjYWxlRmFjdG9yO1xuICAgIHRoaXMudnkgKz0gdGhpcy52eSAqIEJBU0VfU1BFRURfU0NBTEVfRkFDVE9SICogc2NhbGVGYWN0b3I7XG59O1xuXG5TdGFyLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgY29udGV4dC5lbGxpcHNlKHRoaXMueCwgdGhpcy55LCB0aGlzLnNpemUgLyAyLCB0aGlzLnNpemUgLyAyLCAwLCAwLCAyICogTWF0aC5QSSk7XG4gICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcbiAgICBjb250ZXh0LmZpbGwoKTtcbn07XG4iLCJpbXBvcnQgeyBTSE9UX1NQRUVEIH0gZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IHsgU3RhciB9IGZyb20gXCIuL3N0YXJcIjtcbmltcG9ydCB7IGdldE5ld1N0YXJzIH0gZnJvbSBcIi5cIjtcblxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJzJyk7XG5jb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbmxldCBzY29yZSA9IDA7XG5sZXQgZ2FtZU92ZXIgPSBmYWxzZTtcblxuY29uc3Qgc2hvd1Njb3JlID0gKCkgPT4ge1xuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xuICAgIGNvbnRleHQudGV4dEFsaWduID0gXCJsZWZ0XCI7XG4gICAgY29udGV4dC5mb250ID0gXCIyNHB4IG1vbm9cIjtcbiAgICBjb250ZXh0LmZpbGxUZXh0KFwiU0NPUkU6IFwiICsgc2NvcmUsIDEwLCAzMCk7XG59O1xuXG5leHBvcnQgY29uc3QgYW5pbWF0ZVN0YXJzID0gKHN0YXJzKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGFycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgc3RhciA9IHN0YXJzW2ldO1xuXG4gICAgICAgIGlmIChzdGFyLnZpc2libGUpIHtcbiAgICAgICAgICAgIHN0YXIuZHJhdygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjEpIHtcbiAgICAgICAgICAgIHN0YXIudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBzdGFyLm1vdmUoKTtcblxuICAgICAgICBpZiAoc3Rhci54ID4gY2FudmFzLndpZHRoIC0gc3Rhci5zaXplIHx8IHN0YXIueCA8IHN0YXIuc2l6ZVxuICAgICAgICAgICAgfHwgc3Rhci55ID4gY2FudmFzLmhlaWdodCAtIHN0YXIuc2l6ZSB8fCBzdGFyLnkgPCBzdGFyLnNpemUpIHtcbiAgICAgICAgICAgIGlmIChzdGFyLnkgPiBjYW52YXMuaGVpZ2h0IC0gc3Rhci5zaXplKSB7XG4gICAgICAgICAgICAgICAgc2NvcmUrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3RhcnNbaV0gPSBuZXcgU3RhcihjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMyk7XG4gICAgICAgICAgICBzdGFyc1tpXS5tb3ZlKE1hdGgucmFuZG9tKCkgKiAoY2FudmFzLndpZHRoLzYpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXIuc2NhbGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmNvbnN0IGFuaW1hdGVTaG90ID0gKHNob3QpID0+IHtcbiAgICBzaG90LnkgPSBzaG90LnkgLSBTSE9UX1NQRUVEO1xuICAgIFxuICAgIGlmIChzaG90LnkgPT09IDApIHtcbiAgICAgICAgc2hvdC5oaXQgPSB0cnVlO1xuICAgIH1cbiAgICBcbiAgICBzaG90LmRyYXcoKTtcbn07XG5cbmNvbnN0IGlzU2hpcENvbGxpZGluZyA9IChzdGFyLCBzaGlwKSA9PiB7XG4gICAgaWYgKHNoaXAueCAtIHN0YXIueCA8IHNoaXAuc2l6ZSAmJiBzaGlwLnggLSBzdGFyLnggPiAtc2hpcC5zaXplXG4gICAgICAgICYmIHNoaXAueSAtIHN0YXIueSA8IHNoaXAuc2l6ZSAvIDIgJiYgc2hpcC55IC0gc3Rhci55ID4gLXNoaXAuc2l6ZSAvIDJcbiAgICAgICAgJiYgc3Rhci52aXNpYmxlID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cbmNvbnN0IGRyYXdHYW1lT3ZlciA9ICgpID0+IHtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcbiAgICBjb250ZXh0LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgY29udGV4dC5mb250ID0gXCI2MHB4IG1vbm9zcGFjZVwiO1xuICAgIGNvbnRleHQuZmlsbFRleHQoXCJHQU1FIE9WRVJcIiwgY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIpO1xuXG4gICAgY29udGV4dC5mb250ID0gXCIzOHB4IG1vbm9zcGFjZVwiO1xuICAgIGNvbnRleHQuZmlsbFRleHQoXCJUYXAgdG8gcmVzdGFydFwiLCBjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMiArIDgwKTtcbn07XG5cbmNvbnN0IHRvZ2dsZU9iamVjdHNWaXNpYmlsaXR5ID0gKHN0YXJzLCBzaGlwKSA9PiB7XG4gICAgc2hpcC52aXNpYmxlID0gIWdhbWVPdmVyO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5zaG90cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzaGlwLnNob3RzW2ldLmhpdCA9IGdhbWVPdmVyO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc3RhcnNbaV0udmlzaWJsZSA9ICFnYW1lT3ZlcjtcbiAgICB9XG59O1xuXG5jb25zdCBlbmRHYW1lID0gKHN0YXJzLCBzaGlwKSA9PiB7XG4gICAgZ2FtZU92ZXIgPSB0cnVlO1xuXG4gICAgdG9nZ2xlT2JqZWN0c1Zpc2liaWxpdHkoc3RhcnMsIHNoaXApO1xuXG4gICAgZHJhd0dhbWVPdmVyKCk7XG5cbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgXCJwb2ludGVydXBcIixcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgZ2FtZU92ZXIgPSBmYWxzZTtcblxuICAgICAgICAgICAgdG9nZ2xlT2JqZWN0c1Zpc2liaWxpdHkoc3RhcnMsIHNoaXApO1xuXG4gICAgICAgICAgICBzdGFycyA9IGdldE5ld1N0YXJzKCk7XG4gICAgICAgICAgICBzaGlwLnJlc2V0U2l6ZSgpO1xuICAgICAgICAgICAgc2hpcC5zZXRQb3NpdGlvbihjYW52YXMud2lkdGggLyAyLCAoY2FudmFzLmhlaWdodCAvIDYpICogNSk7XG5cbiAgICAgICAgICAgIGFuaW1hdGUoc2hpcCwgc3RhcnMpO1xuICAgICAgICB9LFxuICAgICAgICB7IG9uY2U6IHRydWUgfVxuICAgICk7XG59O1xuXG5jb25zdCBjaGVja1NoaXBDb2xsaXNpb25zID0gKHN0YXJzLCBzaGlwKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGFycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzdGFyID0gc3RhcnNbaV07XG4gICAgICAgIGlmIChpc1NoaXBDb2xsaWRpbmcoc3Rhciwgc2hpcCkpIHtcbiAgICAgICAgICAgIHNoaXAudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgZW5kR2FtZShzdGFycywgc2hpcCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5jb25zdCBjaGVja1Nob3RzQ29sbGlzaW9ucyA9IChzdGFycywgc2hvdHMpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBzdGFyID0gc3RhcnNbaV07XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2hvdHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHNob3QgPSBzaG90c1tqXTtcbiAgICAgICAgICAgIGlmIChzaG90LnggLSBzdGFyLnggPCBzdGFyLnNpemUgJiYgc2hvdC54IC0gc3Rhci54ID4gLXN0YXIuc2l6ZVxuICAgICAgICAgICAgICAgICYmIHNob3QueSAtIHN0YXIueSA8IHN0YXIuc2l6ZSAmJiBzaG90LnkgLSBzdGFyLnkgPiAtc3Rhci5zaXplXG4gICAgICAgICAgICAgICAgJiYgc3Rhci52aXNpYmxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgc2hvdC5oaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHN0YXJzW2ldID0gbmV3IFN0YXIoY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDMpO1xuICAgICAgICAgICAgICAgIHN0YXJzW2ldLm1vdmUoTWF0aC5yYW5kb20oKSAqIChjYW52YXMud2lkdGgvNikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuY29uc3QgY2hlY2tDb2xsaXNpb25zID0gKHN0YXJzLCBzaGlwKSA9PiB7XG4gICAgY2hlY2tTaGlwQ29sbGlzaW9ucyhzdGFycywgc2hpcCk7XG5cbiAgICBjaGVja1Nob3RzQ29sbGlzaW9ucyhzdGFycywgc2hpcC5zaG90cyk7XG59O1xuXG5leHBvcnQgY29uc3QgYW5pbWF0ZSA9IChzaGlwLCBzdGFycykgPT4ge1xuICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICBzaG93U2NvcmUoKTtcblxuICAgIGFuaW1hdGVTdGFycyhzdGFycyk7XG5cbiAgICBpZiAoc2hpcC52aXNpYmxlKSB7XG4gICAgICAgIHNoaXAuZHJhdygpO1xuICAgIH1cblxuICAgIHNoaXAuc2hvdHMgPSBzaGlwLnNob3RzLmZpbHRlcigoc2hvdCkgPT4ge1xuICAgICAgICBhbmltYXRlU2hvdChzaG90KTtcblxuICAgICAgICByZXR1cm4gIXNob3QuaGl0O1xuICAgIH0pO1xuXG4gICAgY2hlY2tDb2xsaXNpb25zKHN0YXJzLCBzaGlwKTtcbiAgICBcbiAgICBpZiAoIWdhbWVPdmVyKSB7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gYW5pbWF0ZShzaGlwLCBzdGFycykpO1xuICAgIH1cbn07XG4iLCJpbXBvcnQgeyBTaGlwLCBTSElQX0hPUklaT05UQUxfU1BFRUQsIFNISVBfVkVSVElDQUxfU1BFRUQgfSBmcm9tIFwiLi9zaGlwXCI7XG5pbXBvcnQgeyBTdGFyIH0gZnJvbSBcIi4vc3RhclwiO1xuaW1wb3J0IHsgYW5pbWF0ZSB9IGZyb20gXCIuL2xvb3BcIjtcbmltcG9ydCB7IGRldmljZUhhc1RvdWNoU2NyZWVuIH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuY29uc3QgTUFYX1NUQVJTID0gMjAwO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV3U3RhcnMoKSB7XG4gICAgY29uc3Qgc3RhcnMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1BWF9TVEFSUzsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHN0YXIgPSBuZXcgU3RhcihjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMyk7XG5cbiAgICAgICAgc3Rhci5tb3ZlKE1hdGgucmFuZG9tKCkgKiAoY2FudmFzLndpZHRoLzMpKTtcblxuICAgICAgICBzdGFycy5wdXNoKHN0YXIpO1xuICAgIH1cblxuICAgIHJldHVybiBzdGFycztcbn1cblxuY29uc3QgYmluZEtleXMgPSAoc2hpcCkgPT4ge1xuICAgIHdpbmRvdy5vbmtleWRvd24gPSAoZSkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XG4gICAgICAgICAgICBjYXNlIFwiS2V5QVwiOlxuICAgICAgICAgICAgICAgIHNoaXAubW92ZUhvcml6b250YWxseSgtU0hJUF9IT1JJWk9OVEFMX1NQRUVEKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6XG4gICAgICAgICAgICBjYXNlIFwiS2V5RFwiOlxuICAgICAgICAgICAgICAgIHNoaXAubW92ZUhvcml6b250YWxseShTSElQX0hPUklaT05UQUxfU1BFRUQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFycm93VXBcIjpcbiAgICAgICAgICAgIGNhc2UgXCJLZXlXXCI6XG4gICAgICAgICAgICAgICAgc2hpcC5tb3ZlVmVydGljYWxseSgtU0hJUF9WRVJUSUNBTF9TUEVFRCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dEb3duXCI6XG4gICAgICAgICAgICBjYXNlIFwiS2V5U1wiOlxuICAgICAgICAgICAgICAgIHNoaXAubW92ZVZlcnRpY2FsbHkoU0hJUF9WRVJUSUNBTF9TUEVFRCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiS2V5WlwiOlxuICAgICAgICAgICAgICAgIHNoaXAuZmlyZVNob3QoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKCFkZXZpY2VIYXNUb3VjaFNjcmVlbigpKSB7XG4gICAgICAgIHdpbmRvdy5vbndoZWVsID0gKGUpID0+IHtcbiAgICAgICAgICAgIHNoaXAubW92ZUhvcml6b250YWxseShlLmRlbHRhWCk7XG4gICAgICAgICAgICBzaGlwLm1vdmVWZXJ0aWNhbGx5KGUuZGVsdGFZKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB3aW5kb3cub25jbGljayA9IChlKSA9PiB7XG4gICAgICAgIHNoaXAuZmlyZVNob3QoZS5jbGllbnRYLCBlLmNsaWVudFkpO1xuICAgIH07XG59O1xuXG5jb25zdCBsaXN0ZW5Ub09yaWVudGF0aW9uQ2hhbmdlID0gKHNoaXAsIHN0YXJzKSA9PiB7XG4gICAgY29uc3QgY2xhbXAgPSAodmFsdWUsIG1pbiwgbWF4KSA9PiB7XG4gICAgICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh2YWx1ZSwgbWluKSwgbWF4KTtcbiAgICB9O1xuXG4gICAgbGV0IGluaXRpYWxCZXRhID0gMDtcbiAgICBsZXQgaW5pdGlhbEdhbW1hID0gMDtcblxuICAgIGNvbnN0IGluaXRpYWxMaXN0ZW5lciA9IChldmVudCkgPT4ge1xuICAgICAgICBpbml0aWFsQmV0YSA9IGNsYW1wKGV2ZW50LmJldGEsIC05MCwgOTApO1xuICAgICAgICBpbml0aWFsR2FtbWEgPSBldmVudC5nYW1tYTtcbiAgICB9O1xuXG4gICAgY29uc3Qgb3JpZW50YXRpb25MaXN0ZW5lciA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBiZXRhID0gY2xhbXAoZXZlbnQuYmV0YSAtIGluaXRpYWxCZXRhLCAtOTAsIDkwKTtcbiAgICAgICAgY29uc3QgZ2FtbWEgPSBldmVudC5nYW1tYSAtIGluaXRpYWxHYW1tYTtcblxuICAgICAgICBzaGlwLm1vdmVIb3Jpem9udGFsbHkoZ2FtbWEgLyA0MCk7XG4gICAgICAgIHNoaXAubW92ZVZlcnRpY2FsbHkoYmV0YSAvIDIwKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzdGFyc1tpXS54IC09IGdhbW1hIC8gNTtcbiAgICAgICAgICAgIHN0YXJzW2ldLnkgKz0gYmV0YSAvIDU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VvcmllbnRhdGlvblwiLCBpbml0aWFsTGlzdGVuZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZW9yaWVudGF0aW9uXCIsIG9yaWVudGF0aW9uTGlzdGVuZXIpO1xufTtcblxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJzJyk7XG5cbmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuY29uc3Qgc3RhcnMgPSBnZXROZXdTdGFycygpO1xuXG5jb25zdCBzaGlwID0gbmV3IFNoaXAoY2FudmFzLndpZHRoIC8gMiwgKGNhbnZhcy5oZWlnaHQgLyA2KSAqIDUpO1xuXG5iaW5kS2V5cyhzaGlwKTtcblxubGlzdGVuVG9PcmllbnRhdGlvbkNoYW5nZShzaGlwLCBzdGFycyk7XG5cbndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gYW5pbWF0ZShzaGlwLCBzdGFycykpO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGRldmljZUhhc1RvdWNoU2NyZWVuKCkge1xuICAgIGxldCBoYXNUb3VjaFNjcmVlbiA9IGZhbHNlO1xuXG4gICAgaWYgKFwibWF4VG91Y2hQb2ludHNcIiBpbiBuYXZpZ2F0b3IpIHtcbiAgICAgICAgaGFzVG91Y2hTY3JlZW4gPSBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAwO1xuICAgIH1cbiAgICBlbHNlIGlmIChcIm1zTWF4VG91Y2hQb2ludHNcIiBpbiBuYXZpZ2F0b3IpIHtcbiAgICAgICAgaGFzVG91Y2hTY3JlZW4gPSBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhhc1RvdWNoU2NyZWVuO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==